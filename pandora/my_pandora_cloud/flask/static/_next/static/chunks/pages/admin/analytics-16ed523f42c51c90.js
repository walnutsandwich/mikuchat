(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{88289:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/analytics",function(){return t(42532)}])},42532:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return E},default:function(){return I}});var a=t(39324),r=t(35250),i=t(21722),n=t(22830),l=t(4337),o=t(38104),c=t(95137),d=t(5268),u=t(65998),g=t(77997),x=t(73413),m=t.n(x),p=t(70079),f=t(25771),y=t(70671),v=t(32004),h=t(94968),k=t(21389),b=t(1821);function j(){var e=(0,l._)(["mb-12 grid grid-cols-1 rounded-lg overflow-hidden border border-token-border-light sm:grid-cols-2"]);return j=function(){return e},e}function w(){var e=(0,l._)(["font-medium"]);return w=function(){return e},e}function _(){var e=(0,l._)(["font-medium text-3xl"]);return _=function(){return e},e}function L(){var e=(0,l._)(["text-sm text-token-text-tertiary"]);return L=function(){return e},e}function M(e){return A.apply(this,arguments)}function A(){return(A=(0,i._)(function(e){var s,t;return(0,o.Jh)(this,function(a){return(s=(0,n._)(e.queryKey,2))[0],t=s[1].workspaceId,[2,c.ZP.getWorkspaceAnalytics(t)]})})).apply(this,arguments)}function N(e){var s=e.data,t=e.label,a=e.getWeekValue,i=(0,y.Z)(),n=(0,g.F)().theme,l=(0,p.useMemo)(function(){var e;return{animation:!1,scales:{y:{position:"right",beginAtZero:!0,ticks:{stepSize:3,color:(e=getComputedStyle(document.body)).getPropertyValue("--text-tertiary"),padding:12},grid:{tickLength:0,color:e.getPropertyValue("--border-medium")},border:{display:!1}},x:{grid:{display:!1},ticks:{color:e.getPropertyValue("--text-tertiary"),padding:20}}},plugins:{legend:!1,tooltip:{backgroundColor:e.getPropertyValue("--surface-primary"),titleColor:e.getPropertyValue("--text-primary"),bodyColor:e.getPropertyValue("--text-secondary"),displayColors:!1,padding:{top:8,left:8,right:8,bottom:8}}}}},[n]),o=(0,p.useMemo)(function(){return getComputedStyle(document.body).getPropertyValue("--text-secondary")},[n]),c={labels:s.weekly_data.map(function(e){return i.formatDate(e.week,{month:"numeric",day:"numeric"})}),datasets:[{label:t,data:s.weekly_data.map(a),borderWidth:0,backgroundColor:o,barThickness:20}]};return(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-token-surface-secondary p-4",children:(0,r.jsx)(f.$Q,{options:l,data:c,height:192})})}function Z(e){var s=e.label,t=e.value;return(0,r.jsxs)("div",{className:"w-1/3 rounded bg-gray-50 px-4 py-2 dark:bg-gray-700",children:[(0,r.jsx)("label",{className:"text-sm text-token-text-secondary",children:s}),(0,r.jsx)("div",{className:"text-xl font-medium text-token-text-primary",children:t})]})}function C(e){var s=e.data,t=(0,y.Z)(),i=s.weekly_data[s.weekly_data.length-2];return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 font-medium text-token-text-primary",children:(0,r.jsx)(v.Z,(0,a._)({},D.totals))}),(0,r.jsxs)("div",{className:"mb-16 flex gap-4",children:[(0,r.jsx)(Z,{label:t.formatMessage(D.usersLabel),value:s.total_users}),(0,r.jsx)(Z,{label:t.formatMessage(D.conversationsLabel),value:s.total_conversations}),(0,r.jsx)(Z,{label:t.formatMessage(D.messagesLabel),value:s.total_messages})]}),(0,r.jsxs)(T,{children:[(0,r.jsx)("div",{className:"flex flex-col justify-between p-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(P,{children:(0,r.jsx)(v.Z,(0,a._)({},D.usageTitle))}),null!=i&&(0,r.jsxs)("div",{children:[(0,r.jsx)(W,{children:i.message_count}),(0,r.jsx)(U,{children:(0,r.jsx)(v.Z,(0,a._)({},D.messagesLastWeek))})]})]})}),(0,r.jsx)("div",{children:(0,r.jsx)(N,{data:s,label:t.formatMessage(D.messagesChartLabel),getWeekValue:function(e){return e.message_count}})})]}),(0,r.jsxs)(T,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(N,{data:s,label:t.formatMessage(D.activeUsersChartLabel),getWeekValue:function(e){return e.active_users_count}})}),(0,r.jsx)("div",{className:"flex grow flex-col justify-between p-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(P,{children:(0,r.jsx)(v.Z,(0,a._)({},D.weeklyUsersTitle))}),null!=i&&(0,r.jsxs)("div",{children:[(0,r.jsx)(W,{children:i.active_users_count}),(0,r.jsx)(U,{children:(0,r.jsx)(v.Z,(0,a._)({},D.activeUsersLastWeek))})]})]})})]})]})}u.kL.register(u.uw,u.f$,u.od,u.ZL,u.Dx,u.u,u.De);var T=k.Z.div(j()),P=k.Z.div(w()),W=k.Z.div(_()),U=k.Z.div(L());function V(e){var s=e.currentWorkspaceId,t=(0,y.Z)(),i=(0,d.a)(["workspace-analytics",{workspaceId:s}],M).data;return(0,r.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[(0,r.jsx)(m(),{children:(0,r.jsx)("title",{children:t.formatMessage(D.title)})}),(0,r.jsxs)("div",{className:"mb-12",children:[(0,r.jsx)("div",{className:"text-2xl font-medium text-token-text-primary",children:(0,r.jsx)(v.Z,(0,a._)({},D.title))}),(0,r.jsx)("div",{className:"text-sm text-token-text-tertiary",children:(0,r.jsx)(v.Z,(0,a._)({},D.pageDescription))})]}),void 0!==i?(0,r.jsx)(C,{data:i}):(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,r.jsx)(b.Z,{})})]})}var D=(0,h.vU)({title:{id:"workspaceAnalytics.title",defaultMessage:"Workspace Analytics",description:"Title of analytics page"},pageDescription:{id:"workspaceAnalytics.understand",defaultMessage:"Understand how your workspace is using ChatGPT",description:"Subtext of workspace analytics page"},totals:{id:"workspaceAnalytics.totals",defaultMessage:"Totals over last 30 days",description:"Section header of total analytics"},usersLabel:{id:"workspaceAnalytics.usersLabel",defaultMessage:"Users",description:"Label of total user count"},conversationsLabel:{id:"workspaceAnalytics.conversationsLabel",defaultMessage:"Conversations",description:"Label of total conversations count"},messagesLabel:{id:"workspaceAnalytics.messagesLabel",defaultMessage:"Messages",description:"Label of total messages count"},usageTitle:{id:"workspaceAnalytics.usageTitle",defaultMessage:"Usage",description:"Title of usage section"},messagesLastWeek:{id:"workspaceAnalytics.messagesLastWeek",defaultMessage:"Messages processed last week",description:"Text under number messages last week"},messagesLast30Days:{id:"workspaceAnalytics.messagesLast30Days",defaultMessage:"{count, plural, =0 {No messages} one {# message} other {# messages}} processed over last 30 days",description:"Analytics text about messages"},messagesChartLabel:{id:"workspaceAnalytics.messagesChartLabel",defaultMessage:"Messages",description:"Label for messages chart"},weeklyUsersTitle:{id:"workspaceAnalytics.weeklyUsersTitle",defaultMessage:"Weekly users",description:"Title of weekly users section"},activeUsersChartLabel:{id:"workspaceAnalytics.activeUsersChartLabel",defaultMessage:"Active users",description:"Label for active users chart"},activeUsersLastWeek:{id:"workspaceAnalytics.activeUsersLastWeek",defaultMessage:"Active users last week",description:"Text under number active users last week"},usersLast30Days:{id:"workspaceAnalytics.usersLast30Days",defaultMessage:"{count, plural, =0 {No active users} one {# active user} other {# active user}} over last 30 days",description:"Analytics text about active users"}}),S=t(43267),E=!0;function I(e){return(0,r.jsx)(V,(0,a._)({},e))}I.getLayout=function(e){return(0,r.jsx)(S.default,{mobilePageTitle:"Analytics",requireAdminPrivileges:!0,children:e})}}},function(e){e.O(0,[6835,2104,667,3267,9774,2888,179],function(){return e(e.s=88289)}),_N_E=e.O()}]);