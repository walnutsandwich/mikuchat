(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3224],{15347:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/billing",function(){return n(14091)}])},14091:function(e,i,n){"use strict";n.r(i),n.d(i,{__N_SSP:function(){return Z},default:function(){return L}});var t=n(35250),a=n(21722),s=n(39324),r=n(71209),o=n(22830),l=n(38104),d=n(95137),c=n(78931),u=n(5268),g=n(19841),f=n(70079),x=n(1454),m=n(70671),v=n(32004),p=n(94968),h=n(1821),j=n(88798);function _(e){return y.apply(this,arguments)}function y(){return(y=(0,a._)(function(e){var i,n,t,a;return(0,l.Jh)(this,function(s){return(i=(0,o._)(e.queryKey,2))[0],t=(n=i[1]).organizationId,a=n.intl,[2,d.ZP.getOrganizationSubscription(t).catch(function(e){j.m.danger(a.formatMessage(k.subscriptionLoadError,{error:e.message}))})]})})).apply(this,arguments)}function N(e){return b.apply(this,arguments)}function b(){return(b=(0,a._)(function(e){var i,n,t,a,s;return(0,l.Jh)(this,function(r){return(i=(0,o._)(e.queryKey,2))[0],t=(n=i[1]).organizationId,a=n.options,s=n.intl,[2,d.ZP.getOrganizationInvoices(t,a).catch(function(e){j.m.danger(s.formatMessage(k.invoicesLoadError,{error:e.message}))})]})})).apply(this,arguments)}function I(e){var i,n,a=(i=e.organizationId,n=(0,m.Z)(),(0,u.a)(["organization-subscription",{organizationId:i,intl:n}],_)),o=a.data,l=(0,m.Z)();if(a.isError)return null;if(!o)return(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)(h.Z,{})});var d=null!=o.active_until,c=l.formatNumber(o.seats_in_use/o.seats_entitled,{style:"percent",maximumFractionDigits:1});return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"m-4 border-t border-gray-50 dark:border-gray-700"}),(0,t.jsxs)("div",{className:"flex flex-col rounded-xl border-t border-gray-50 bg-gray-50 px-4 py-2 text-gray-900 dark:border-gray-700 dark:bg-gray-700",children:[(0,t.jsx)("div",{className:"m-1 mb-6 text-sm font-light text-token-text-primary",children:(0,t.jsx)(v.Z,(0,s._)({},k.planTitle))}),(0,t.jsx)("div",{className:"m-2 flex",children:(0,t.jsx)("div",{className:"flex flex-col rounded-lg bg-gray-100 px-4 py-3 text-sm text-gray-900 dark:bg-gray-600 dark:text-gray-100",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-base font-medium",children:(0,t.jsx)(v.Z,(0,s._)({},k.activeLicense))}),(0,t.jsx)("div",{className:"text-sm font-light text-gray-500",children:(0,t.jsx)(v.Z,(0,r._)((0,s._)({},k.activeLicenseSeats),{values:{numSeats:o.seats_entitled}}))})]}):(0,t.jsx)(v.Z,(0,s._)({},k.inactiveLicense))})}),null!=o.active_until&&(0,t.jsx)("ul",{className:"text list-inside list-disc text-gray-600 dark:text-gray-200",children:(0,t.jsx)("li",{children:(0,t.jsx)(v.Z,(0,r._)((0,s._)({},k.licenseExpiry),{values:{expiryDate:new Date(o.active_until)}}))})})]}),d&&(0,t.jsxs)("div",{className:"m-4 border-t border-gray-50 dark:border-gray-700",children:[(0,t.jsx)("div",{className:"my-4 text-sm font-light text-gray-600 dark:text-gray-300",children:(0,t.jsx)(v.Z,(0,s._)({},k.seatsTitle))}),(0,t.jsxs)("div",{className:"my-6",children:[(0,t.jsx)("div",{className:"h-2.5 w-full rounded-full bg-gray-100 dark:bg-gray-700",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-black dark:bg-gray-100",style:{width:c}})}),(0,t.jsxs)("div",{className:"mt-2 flex justify-between text-sm",children:[(0,t.jsx)("span",{children:(0,t.jsx)(v.Z,(0,r._)((0,s._)({},k.seatsInUse),{values:{numSeats:(0,t.jsx)("span",{className:"font-semibold",children:(0,t.jsx)(p.BK,{value:o.seats_in_use})}),numSeatsPct:c}}))}),(0,t.jsx)("span",{className:"text-gray-500",children:(0,t.jsx)(p.BK,{value:o.seats_entitled})})]})]})]})]})}function z(e){var i=e.invoice,n=(null==i?void 0:i.status_transitions.paid_at)!=null&&new Date(1e3*i.status_transitions.paid_at),a=i&&new Date(1e3*i.due_date),o=i&&new Date(1e3*i.created);return(0,t.jsxs)("div",{className:"my-4 flex rounded-xl border p-2 dark:border-gray-600",children:[(0,t.jsx)("div",{className:"m-4",children:i?(0,t.jsx)(x.tHe,{className:"icon-xl mx-auto"}):(0,t.jsx)(h.Z,{})}),(0,t.jsxs)("div",{className:"my-2 flex flex-col",children:[(0,t.jsx)("div",{className:"my-1 font-light",children:o?(0,t.jsx)(v.Z,(0,r._)((0,s._)({},k.invoiceName),{values:{createdDate:o}})):(0,t.jsx)(v.Z,(0,s._)({},k.defaultInvoiceName))}),(null==i?void 0:i.paid)&&null!=n?(0,t.jsx)("div",{className:"text-xs text-gray-500",children:(0,t.jsx)(v.Z,(0,r._)((0,s._)({},k.paidInvoice),{values:{invoiceDate:n}}))}):i&&(0,t.jsx)("div",{className:"text-xs text-green-500",children:(0,t.jsx)(v.Z,(0,r._)((0,s._)({},k.upcomingInvoice),{values:{invoiceDate:a}}))})]}),(0,t.jsx)("div",{className:"flex-grow"}),(0,t.jsx)("div",{className:"m-4",children:(0,t.jsx)("a",{href:null==i?void 0:i.hosted_invoice_url,className:(0,g.default)("mx-auto",(null==i?void 0:i.hosted_invoice_url)==void 0&&"cursor-not-allowed opacity-20"),target:"_blank",rel:"noreferrer",children:(0,t.jsx)(x.AlO,{className:"icon-xl"})})})]})}function w(e){var i,n,a=e.organizationId,l=(0,o._)((0,f.useState)({limit:5}),2),d=l[0],c=l[1],g=(i=(0,m.Z)(),(0,u.a)(["organization-invoices",{organizationId:a,options:d,intl:i}],N)),p=g.data,h=null!=d.startingAfter||null!=d.endingBefore&&(null==p?void 0:p.has_more),j=null!=d.endingBefore||(null==p?void 0:p.has_more)&&null==d.endingBefore;return(0,t.jsxs)("div",{className:"m-4 border-t border-gray-50 dark:border-gray-700",children:[(0,t.jsx)("div",{className:"my-6 text-sm font-light text-gray-600 dark:text-gray-300",children:(0,t.jsx)(v.Z,(0,s._)({},k.invoicesTitle))}),g.isError?null:null!=p?p.data.map(function(e){return(0,t.jsx)(z,{invoice:e},e.id)}):Array(null!==(n=d.limit)&&void 0!==n?n:3).fill(0).map(function(e,i){return(0,t.jsx)(z,{},i)}),(0,t.jsxs)("div",{className:"flex",children:[h&&(0,t.jsx)("button",{onClick:function(){p&&c(function(e){return(0,r._)((0,s._)({},e),{endingBefore:p.data[0].id,startingAfter:void 0})})},children:(0,t.jsx)(x.YFh,{className:"icon-sm"})}),(0,t.jsx)("div",{className:"flex-grow"}),j&&(0,t.jsx)("button",{onClick:function(){p&&c(function(e){return(0,r._)((0,s._)({},e),{startingAfter:p.data[p.data.length-1].id,endingBefore:void 0})})},children:(0,t.jsx)(x.Tfp,{className:"icon-sm"})})]})]})}function E(){var e=(0,c.ec)(function(e){return e.currentWorkspace}),i=null==e?void 0:e.organizationId;return void 0===i?null:(0,t.jsxs)("div",{className:"mx-auto max-w-lg py-12",children:[(0,t.jsx)("div",{className:"my-12 text-center text-2xl font-medium text-token-text-primary",children:(0,t.jsx)(v.Z,(0,s._)({},k.title))}),(0,t.jsx)(I,{organizationId:i}),(0,t.jsx)(w,{organizationId:i})]})}var k=(0,p.vU)({title:{id:"organizationBillingInfo.title",defaultMessage:"ChatGPT Enterprise",description:"Title for the organization billing info page"},planTitle:{id:"organizationBillingInfo.planTitle",defaultMessage:"Plan",description:"Title for the organization billing plan"},activeLicense:{id:"organizationBillingInfo.activeLicense",defaultMessage:"Enterprise License",description:"Active enterprise license name"},activeLicenseSeats:{id:"organizationBillingInfo.activeLicenseSeats",defaultMessage:"{numSeats, plural, =0 {No seats} one {# seat} other {# seats}}",description:"Active enterprise license seats"},inactiveLicense:{id:"organizationBillingInfo.inactiveLicense",defaultMessage:"Inactive License",description:"Inactive enterprise license name"},licenseExpiry:{id:"organizationBillingInfo.licenseExpiry",defaultMessage:"Active until {expiryDate, date, long}",description:"License expiry date"},seatsTitle:{id:"organizationBillingInfo.seatsTitle",defaultMessage:"Seats",description:"Title for the organization billing seats"},seatsInUse:{id:"organizationBillingInfo.seatsInUse",defaultMessage:"{numSeats} in use ({numSeatsPct})",description:"Number of enterprise seats in use"},invoicesTitle:{id:"organizationBillingInfo.invoicesTitle",defaultMessage:"Invoices",description:"Title for the organization invoices"},invoiceName:{id:"organizationBillingInfo.invoiceName",defaultMessage:"Invoice: {createdDate, date, long}",description:"Enterprise invoice name"},defaultInvoiceName:{id:"organizationBillingInfo.defaultInvoiceName",defaultMessage:"Invoice",description:"Enterprise invoice name when we are missing dates"},paidInvoice:{id:"organizationBillingInfo.paidInvoice",defaultMessage:"Paid: {invoiceDate, date, long}",description:"Paid invoice date"},upcomingInvoice:{id:"organizationBillingInfo.upcomingInvoice",defaultMessage:"Due: {invoiceDate, date, long}",description:"Upcoming invoice date"},invoicesLoadError:{id:"organizationBillingInfo.invoicesLoadError",defaultMessage:"Failed to load invoices: {error}. Contact support@openai.com if error persists.",description:"Error message when invoices fail to load"},subscriptionLoadError:{id:"organizationBillingInfo.subscriptionLoadError",defaultMessage:"Failed to load subscription: {error}. Contact support@openai.com if error persists.",description:"Error message when subscription fails to load"}}),B=n(43267),Z=!0;function L(){return(0,t.jsx)(E,{})}L.getLayout=function(e){return(0,t.jsx)(B.default,{mobilePageTitle:"Billing Info",requireAdminPrivileges:!0,children:e})}},16266:function(e,i,n){"use strict";var t=n(70079);let a=t.forwardRef(function({title:e,titleId:i,...n},a){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":i},n),e?t.createElement("title",{id:i},e):null,t.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z",clipRule:"evenodd"}))});i.Z=a}},function(e){e.O(0,[2104,3267,9774,2888,179],function(){return e(e.s=15347)}),_N_E=e.O()}]);