(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2571],{15255:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/identity",function(){return n(89942)}])},89942:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return eb},default:function(){return ey}});var o,i,a,s,r,d,c=n(39324),l=n(35250),u=n(22830),f=n(75641),m=n(70079);let p=m.forwardRef(function({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"}))}),h=m.forwardRef(function({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{fillRule:"evenodd",d:"M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08zm3.094 8.016a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"}))});var g=n(77311),v=n(19841),x=n(73413),b=n.n(x),y=n(32004),I=n(70671),M=n(94968),j=n(67273),w=n(1821),S=n(97674),T=n(96237),k=n(92720),C=n(55629),N=n(1454),L=n(21722),E=n(38104);let _=m.forwardRef(function({title:e,titleId:t,...n},o){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},n),e?m.createElement("title",{id:t},e):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z"}))});var D=n(11084),A=function(e){var t=e.label,n=e.showOnHover,o=e.value,i=e.onCopied,a=function(){(0,D.S)(o),i()};return(0,l.jsxs)("div",{className:"flex flex-col space-y-2 text-gray-700 dark:text-gray-200",children:[void 0!==t&&(0,l.jsx)("label",{className:"font-medium",children:t}),(0,l.jsxs)("div",{className:"flex items-center justify-between space-x-2",children:[(0,l.jsx)("div",{onClick:a,className:(0,v.default)("flex-1 cursor-pointer rounded-lg border border-gray-300 bg-white p-2 dark:bg-gray-700",n?"truncate hover:overflow-visible hover:whitespace-normal":""),children:o}),(0,l.jsx)("div",{onClick:a,className:"cursor-pointer p-1 hover:bg-gray-100",children:(0,l.jsx)(_,{className:"h-5 w-5"})})]})]})},P=n(79579),Z=n(89368),O=n(51973),R=n(88798),B=n(95137),F=n(13995),U=n(74686);function X(e){var t,n,o=e.workspaceId,i=e.isOpen,a=e.onClose,r=e.domain,d=(0,I.Z)(),p=(t=(0,F.NL)(),(0,U.D)({mutationFn:function(e){var t=e.hostname;return B.ZP.addDomainToWorkspace(o,t)},onSuccess:function(){t.invalidateQueries({queryKey:["workspace/identity",o]})}})).mutateAsync,h=(n=(0,F.NL)(),(0,U.D)({mutationFn:function(e){var t=e.domainId;return B.ZP.checkDomainForWorkspace(o,t)},onSuccess:function(){n.invalidateQueries({queryKey:["workspace/identity",o]})}})).mutateAsync,g=(0,u._)((0,m.useState)(null==r?void 0:r.hostname),2),v=g[0],x=g[1],b=(0,u._)((0,m.useState)(null==r?void 0:r.dns_verification_token_string),2),M=b[0],j=b[1],w=(0,u._)((0,m.useState)(),2),S=w[0],T=w[1],k=(0,u._)((0,m.useState)((null==r?void 0:r.status)===void 0?s.INITIAL:(null==r?void 0:r.status)===f.pT.PENDING?s.PENDING:s.FINAL),2),C=k[0],_=k[1],D=(0,u._)((0,m.useState)(null==r?void 0:r.id),2),X=D[0],z=D[1],H=function(){r||(z(void 0),j(void 0),x(void 0),_(s.INITIAL)),T(void 0)},G=(0,l.jsx)(P.ZP.Button,{title:d.formatMessage(V.check),color:"primary",disabled:void 0===v,onClick:(0,L._)(function(){var e;return(0,E.Jh)(this,function(t){switch(t.label){case 0:if(!(void 0!==X))return[3,2];return[4,h({domainId:X})];case 1:"error"in(e=t.sent())&&T(d.formatMessage(V.domainCheckError)),"id"in e&&e.status===f.pT.VERIFIED&&_(s.FINAL),t.label=2;case 2:return[2]}})})}),J=(0,l.jsx)(P.ZP.Button,{title:d.formatMessage(V.submit),color:"primary",disabled:void 0===v,onClick:(0,L._)(function(){var e;return(0,E.Jh)(this,function(t){switch(t.label){case 0:if(void 0===v)return[2];return[4,p({hostname:v})];case 1:return"error"in(e=t.sent())&&T(e.error.message),"id"in e&&(j(e.dns_verification_token_string),z(e.id)),_(s.PENDING),[2]}})})}),W=(0,l.jsx)(P.ZP.Button,{title:d.formatMessage(V.done),color:"primary",onClick:function(){H(),a()}});return(0,l.jsx)(Z.Z,{isOpen:i,onClose:a,type:"success",title:d.formatMessage(C===s.INITIAL?V.newTitle:V.editTitle),primaryButton:C===s.INITIAL?J:C===s.PENDING?G:W,secondaryButton:(0,l.jsx)(P.ZP.Button,{title:d.formatMessage(V.cancel),color:"light",onClick:function(){H(),a()}}),children:C===s.INITIAL?(0,l.jsxs)("form",{children:[void 0!==S&&(0,l.jsxs)("div",{className:"mt-2 flex w-full items-center bg-red-100 p-3",children:[(0,l.jsx)(N.BJv,{className:"icon-sm mr-2 text-red-400"}),(0,l.jsx)("div",{className:"flex-grow-0 text-xs text-red-700",children:S})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"mb-2 flex items-center text-sm",children:(0,l.jsx)(y.Z,(0,c._)({},V.domainInput))}),(0,l.jsx)(O.Z,{name:"hostname",placeholder:d.formatMessage(V.placeholder),value:null!=v?v:"",onChange:function(e){x(e.target.value)}})]})]}):C===s.PENDING?(0,l.jsxs)("div",{className:"mb-4 text-gray-500 dark:text-gray-400",children:[(0,l.jsx)("div",{children:d.formatMessage(V.verificationTokenMessage,{hostname:v})}),(0,l.jsx)("div",{className:"my-4 font-medium",children:(0,l.jsx)(A,{value:M,onCopied:function(){R.m.success(d.formatMessage(V.copiedTXTRecordToClipboard),{duration:3})}})}),(0,l.jsx)("div",{children:d.formatMessage(V.verificationTokenFooter)}),void 0!==S&&(0,l.jsxs)("div",{className:"mt-2 flex w-full items-center bg-red-100 p-3",children:[(0,l.jsx)(N.BJv,{className:"icon-sm mr-2 text-red-400"}),(0,l.jsx)("div",{className:"flex-grow-0 text-xs text-red-700",children:S})]})]}):(0,l.jsxs)("div",{className:"mb-4 text-gray-500 dark:text-gray-400",children:[(0,l.jsx)("div",{children:d.formatMessage(V.successfulVerification,{hostname:v})}),(0,l.jsx)("div",{className:"my-4 font-medium",children:(0,l.jsx)(A,{value:M,onCopied:function(){R.m.success(d.formatMessage(V.copiedTXTRecordToClipboard),{duration:3})}})})]})})}(o=s||(s={}))[o.INITIAL=0]="INITIAL",o[o.PENDING=1]="PENDING",o[o.FINAL=2]="FINAL";var V=(0,M.vU)({newTitle:{id:"domainModal.newTitle",defaultMessage:"New Domain",description:"The title for the domain modal in new mode."},editTitle:{id:"domainModal.editTitle",defaultMessage:"Manage Domain",description:"The title for the domain modal in edit mode."},submit:{id:"domainModal.submit",defaultMessage:"Submit",description:"The label for the submit button."},check:{id:"domainModal.check",defaultMessage:"Check",description:"The label for the check button."},done:{id:"domainModal.done",defaultMessage:"Done",description:"The label for the done button."},cancel:{id:"domainModal.cancel",defaultMessage:"Cancel",description:"The label for the cancel button."},domainInput:{id:"domainModal.domainInput",defaultMessage:"Hostname",description:"The label for the domain input."},placeholder:{id:"domainModal.placeholder",defaultMessage:"openai.com",description:"The placeholder text domain input."},domainCheckError:{id:"domainModal.domainCheckError",defaultMessage:"Your domain could not be verified. Make sure you've correctly set the TXT record above. DNS records may take up to 30 minutes to propagate.",description:"Error message when domain cannot be successfully verified."},verificationTokenMessage:{id:"domainModal.verificationTokenMessage",defaultMessage:"To verify ownership of {hostname}, navigate to your DNS provider and add a TXT record with this value:",description:"Message that informs the user how to verify their domain."},verificationTokenFooter:{id:"domainModal.verificationTokenFooter",defaultMessage:"Then, check the record to complete the verification.",description:"Message that informs the user how to verify their domain."},successfulVerification:{id:"domainModal.successfulVerification",defaultMessage:"{hostname} has been successfully verified!",description:"Message showing the user their domain verification is complete.."},copiedTXTRecordToClipboard:{id:"domainModal.copiedTXTRecordToClipboard",defaultMessage:"Copied DNS TXT record to clipboard",description:"Message informing the user their TXT record has been copied."}}),z=n(4337),H=n(5268),G=n(21389);function J(){var e=(0,z._)(["font-medium text-xl text-gray-700 dark:text-gray-200"]);return J=function(){return e},e}function W(){var e=(0,z._)(["my-8 rounded-lg space-y-6"]);return W=function(){return e},e}function q(){var e=(0,z._)(["text-lg font-medium text-gray-700 dark:text-gray-200"]);return q=function(){return e},e}function K(){var e=(0,z._)(["text-md mb-4 text-gray-600 dark:text-gray-300"]);return K=function(){return e},e}function Q(){var e=(0,z._)(["border-gray-100 dark:border-gray-600"]);return Q=function(){return e},e}function Y(e){var t=e;return t.startsWith("-----BEGIN")||(t="-----BEGIN CERTIFICATE-----\n".concat(t)),t.endsWith("CERTIFICATE-----")||(t="".concat(t,"\n-----END CERTIFICATE-----")),t}function $(e){var t=(0,F.NL)();return(0,U.D)({mutationFn:function(t){var n=t.connectionId,o=t.signInEndpoint,i=t.cert,a=t.active,s=t.enforcedClients;return B.ZP.updateSAMLConnection(e,n,{signInEndpoint:o,cert:void 0!==i?Y(i):void 0,active:a,enforcedClients:s})},onSuccess:function(){t.refetchQueries({queryKey:["workspace/identity",e]})}})}var ee=G.Z.div(J()),et=G.Z.div(W()),en=G.Z.div(q()),eo=G.Z.div(K()),ei=G.Z.hr(Q()),ea=(r={},(0,T._)(r,f.pT.VERIFIED,"Verified"),(0,T._)(r,f.pT.PENDING,"Pending"),(0,T._)(r,f.pT.EXPIRED,"Expired"),r),es={autoProvisionEnabledToast:{id:"workspaceIdentity.autoProvisionEnabledToast",defaultMessage:"Auto provisioning enabled for this workspace",description:"Toast message for enabling auto provisioning"},autoProvisionDisabledToast:{id:"workspaceIdentity.autoProvisionDisabledToast",defaultMessage:"Auto provisioning disabled for this workspace",description:"Toast message for disabling auto provisioning"}};function er(e){var t=e.onRemoveDomainClick,n=e.onVerifyDomainClick;return(0,l.jsxs)(k.Z.Root,{children:[(0,l.jsx)(k.Z.Trigger,{children:(0,l.jsx)(N.K9M,{className:"icon-sm"})}),(0,l.jsx)(k.Z.Portal,{children:(0,l.jsxs)(k.Z.Content,{children:[(0,l.jsx)(k.Z.Item,{onClick:t,children:(0,l.jsx)(y.Z,(0,c._)({},ec.ssoDropdownRemoveButtonText))}),(0,l.jsx)(k.Z.Item,{onClick:n,children:(0,l.jsx)(y.Z,(0,c._)({},ec.ssoDropdownVerifyButtonText))})]})})]})}function ed(e){var t,n=e.domains,o=e.workspaceId,i=(t=(0,F.NL)(),(0,U.D)({mutationFn:function(e){var t=e.domainId;return B.ZP.removeDomainFromWorkspace(o,t)},onSuccess:function(){t.refetchQueries({queryKey:["workspace/identity",o]})}})).mutateAsync,a=(0,u._)((0,m.useState)({}),2),s=a[0],r=a[1],d=(0,u._)((0,m.useState)(!1),2),f=d[0],p=d[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(C.Z.Root,{className:"w-full table-auto",children:[(0,l.jsx)("thead",{className:"border-b border-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-2 text-left font-light",children:(0,l.jsx)(y.Z,(0,c._)({},ec.domainTableHeader))}),(0,l.jsx)("th",{className:"py-2 text-left font-light",children:(0,l.jsx)(y.Z,(0,c._)({},ec.statusTableHeader))}),(0,l.jsx)("th",{className:"py-2"})]})}),(0,l.jsx)("tbody",{children:n.map(function(e,t){return(0,l.jsxs)("tr",{onClick:function(){return r((0,T._)({},t,!0))},className:"cursor-pointer",children:[(0,l.jsx)("td",{className:"border-t border-gray-200 py-2 dark:border-gray-600",children:e.hostname}),(0,l.jsx)("td",{className:"border-t border-gray-200 py-2 dark:border-gray-600",children:(0,l.jsx)("span",{className:"flex items-center",children:ea[e.status]})}),(0,l.jsx)("td",{className:"w-min border-t border-gray-200 py-2 text-right dark:border-gray-600",children:(0,l.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:(0,l.jsx)(er,{onRemoveDomainClick:function(){i({domainId:e.id})},onVerifyDomainClick:function(){r((0,T._)({},t,!0))}})})}),(0,l.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:(0,l.jsx)(X,{isOpen:s[t],onClose:function(){var e=(0,c._)({},s);delete e[t],r(e)},workspaceId:o,domain:e})})]},t)})})]}),(0,l.jsx)("button",{className:"mt-6 font-medium text-gray-800 dark:text-gray-200",onClick:function(){p(!0)},children:(0,l.jsx)(y.Z,(0,c._)({},ec.addDomainButton))}),(0,l.jsx)(X,{isOpen:f,onClose:function(){return p(!1)},workspaceId:o})]})}var ec={ssoDropdownRemoveButtonText:{id:"workspaceIdentity.ssoDropdownRemoveButtonText",defaultMessage:"Remove Domain",description:"Dropdown choice for remove domain"},ssoDropdownVerifyButtonText:{id:"workspaceIdentity.ssoDropdownVerifyButtonText",defaultMessage:"Verify",description:"Dropdown choice to bring up the verification modal"},domainTableHeader:{id:"workspaceIdentity.domainTableHeader",defaultMessage:"Domain",description:"Label for domain column on domains table"},statusTableHeader:{id:"workspaceIdentity.statusTableHeader",defaultMessage:"Status",description:"Label for status column on domains table"},addDomainButton:{id:"workspaceIdentity.addDomainButton",defaultMessage:"+ Add domain",description:"Label for add domain button"}},el=(i=(0,L._)(function(e){return(0,E.Jh)(this,function(t){return[2,new Promise(function(t,n){var o=new FileReader;o.readAsText(e),o.onload=function(e){var n;t(null===(n=e.target)||void 0===n?void 0:n.result)},o.onerror=n})]})}),function(e){return i.apply(this,arguments)});function eu(e){var t=e.acsId,n=e.hasSSO,o="".concat(location.host,"/auth/login?sso=true&connection=").concat(t),i=(0,I.Z)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eo,{children:(0,l.jsx)(y.Z,(0,c._)({},em.setupSSOContent))}),(0,l.jsxs)("div",{className:"mb-6 flex flex-col space-y-4",children:[(0,l.jsx)(A,{label:i.formatMessage(em.acsURLLabel),value:"https://auth0.openai.com/login/callback?connection=".concat(t),onCopied:function(){R.m.success(i.formatMessage(em.copiedACSToClipboard),{duration:3})}}),(0,l.jsx)(A,{label:i.formatMessage(em.entityIDLabel),value:"urn:auth0:openai:".concat(t),onCopied:function(){R.m.success(i.formatMessage(em.copiedEntityToClipboard),{duration:3})}}),n&&(0,l.jsx)(A,{label:i.formatMessage(em.idpSignInURL),value:o,onCopied:function(){R.m.success(i.formatMessage(em.copiedIDPUrlToClipboard),{duration:3})}})]})]})}function ef(e){var t,n,o,i,a=e.workspaceId,s=e.data,r=e.isOpen,f=e.onClose,p=(0,I.Z)(),h=(t=(0,F.NL)(),(0,U.D)({mutationFn:function(e){var t=e.signInEndpoint,n=e.cert;return B.ZP.createSAMLConnection(a,t,Y(n))},onSuccess:function(){t.refetchQueries({queryKey:["workspace/identity",a]})}})).mutateAsync,g=(n=(0,F.NL)(),(0,U.D)({mutationFn:function(e){var t=e.connectionId;return B.ZP.deleteSAMLConnection(a,t)},onSuccess:function(){n.refetchQueries({queryKey:["workspace/identity",a]})}})).mutateAsync,x=$(a).mutateAsync,b=(0,m.useRef)(null),M=null==s?void 0:s.connection,w=(0,u._)((0,m.useState)(null==M?void 0:M.sign_in_endpoint),2),S=w[0],T=w[1],k=(0,u._)((0,m.useState)(null==M?void 0:M.cert),2),C=k[0],_=k[1],D=null===s?d.CREATE:d.EDIT,A=(o=(0,L._)(function(e,t){return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,h({signInEndpoint:e,cert:t})];case 1:return[4,x({connectionId:n.sent().id,active:!0})];case 2:return n.sent(),f(),[2]}})}),function(e,t){return o.apply(this,arguments)}),R=D===d.CREATE?(0,l.jsx)(P.ZP.Button,{title:p.formatMessage(em.doneButton),color:"primary",disabled:void 0===S||void 0===C,onClick:(0,L._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:if(void 0===S||void 0===C)return[2];return[4,A(S,C)];case 1:return e.sent(),[2]}})})}):s&&(0,l.jsx)(P.ZP.Button,{title:p.formatMessage(em.doneButton),color:"primary",onClick:(0,L._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return[4,x({connectionId:null==s?void 0:s.id,cert:C,signInEndpoint:S,active:!0})];case 1:return e.sent(),f(),[2]}})})}),X=null===s?(0,l.jsx)(P.ZP.Button,{title:p.formatMessage(em.cancelButton),color:"light",onClick:function(){return f()}}):(0,l.jsx)(j.z,{as:"link",color:"danger",className:"bg-transparent font-bold text-red-500 hover:bg-transparent",onClick:(0,L._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return[4,g({connectionId:null==s?void 0:s.id})];case 1:return e.sent(),f(),[2]}})}),children:p.formatMessage(em.deleteButton)});return(0,l.jsx)(Z.Z,{isOpen:r,type:"success",title:p.formatMessage(D===d.CREATE?em.createTitle:em.editTitle),primaryButton:R,secondaryButton:X,onClose:f,children:(0,l.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[(0,l.jsx)(eo,{children:(0,l.jsx)(y.Z,(0,c._)({},em.createInstructionsManual))}),(0,l.jsx)("label",{className:"mb-2 flex items-center text-sm",children:(0,l.jsx)(y.Z,(0,c._)({},em.signInLabel))}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(O.Z,{className:"w-full appearance-none rounded border px-3 py-2",name:"Sign-In URL",type:"text",placeholder:"https://your.idp.here/saml2?idpid=123456",value:null!=S?S:"",onChange:function(e){T(e.target.value)}})}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,l.jsx)("label",{className:"text-sm",children:(0,l.jsx)(y.Z,(0,c._)({},em.certLabel))}),(0,l.jsx)("input",{ref:b,type:"file",accept:".csv,.cer,.pem,text/plain",className:"hidden",onChange:(i=(0,L._)(function(e){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if(!(null===(t=e.target.files)||void 0===t?void 0:t[0]))return[3,2];return[4,el(e.target.files[0])];case 1:_(n.sent()),n.label=2;case 2:return[2]}})}),function(e){return i.apply(this,arguments)})}),(0,l.jsx)(j.z,{color:"light",onClick:function(){return b.current.click()},children:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(N.Yjd,{className:"icon-sm"})})})]}),(0,l.jsx)("textarea",{rows:10,className:(0,v.default)("w-full resize-none overflow-y-auto rounded border border-gray-300 px-3 py-2","outline-none focus-within:border-indigo-600 focus-within:ring-1 focus-within:ring-indigo-600","text-gray-900 placeholder-gray-500 dark:bg-gray-700 dark:text-gray-100"),placeholder:"-----BEGIN CERTIFICATE-----",value:null!=C?C:"",onChange:function(e){_(e.target.value)}})]})]})})}(a=d||(d={}))[a.CREATE=1]="CREATE",a[a.EDIT=2]="EDIT";var em=(0,M.vU)({setupSSOContent:{id:"workspaceIdentity.setupSSOContent",defaultMessage:"Anyone using email addresses with a verified domain can log in via SAML SSO.",description:"Content describing how SAML SSO will work when set up"},createInstructionsXML:{id:"ssoModal.createInstructionsXML",defaultMessage:"If your Identity Provider offers a metadata URL or an XML file, add it here for the quickest setup option.",description:"Instructions for users to create an SSO connection from an XML configuration that the IDP provides"},createInstructionsManual:{id:"ssoModal.createInstructionsManual",defaultMessage:"Copy your Sign-in endpoint (SSO URL) and the public X.509 certificate from your Identity Provider.",description:"Instructions for users to create an SSO connection from their IDP"},createTitle:{id:"ssoModal.createTitle",defaultMessage:"Create SAML SSO Configuration",description:"The title for the create version of the SSO modal"},editTitle:{id:"ssoModal.editTitle",defaultMessage:"Edit SAML SSO Configuration",description:"The title for the edit version of the SSO modal"},ssoMetadataLabel:{id:"ssoModal.ssoMetadataLabel",defaultMessage:"App Federation Metadata URL",description:"The label for the IDP XML metadata URL input"},signInLabel:{id:"ssoModal.signInLabel",defaultMessage:"SSO URL",description:"The label for the sign in endpoint input"},certLabel:{id:"ssoModal.certLabel",defaultMessage:"X.509 Signing Certificate",description:"The label for the X.509 signing certificate input"},doneButton:{id:"ssoModal.doneButton",defaultMessage:"Done",description:"The text for the done button on the SSO modal"},nextButton:{id:"ssoModal.nextButton",defaultMessage:"Next",description:"The text for the next button on the SSO modal"},deleteButton:{id:"ssoModal.deleteButton",defaultMessage:"Delete configuration",description:"The text for the delete button on the SSO modal"},cancelButton:{id:"ssoModal.cancelButton",defaultMessage:"Cancel",description:"The text for the cancel button on the SSO modal"},acsURLLabel:{id:"workspaceIdentity.acsURLLabel",defaultMessage:"Assertion Consumer Service (ACS) URL",description:"Label for the ACS URL configuration text"},entityIDLabel:{id:"workspaceIdentity.entityIDLabel",defaultMessage:"Entity ID",description:"Label for the Entity ID configuration text"},idpSignInURL:{id:"workspaceIdentity.idpSignInURL",defaultMessage:"IDP Tile URL",description:"Label for the IDP Tile URL configuration text"},copiedACSToClipboard:{id:"workspaceIdentity.copiedACSToClipboard",defaultMessage:"Copied ACS URL to clipboard",description:"Message for success toast on copying post-back url"},copiedEntityToClipboard:{id:"workspaceIdentity.copiedEntityToClipboard",defaultMessage:"Copied entity ID to clipboard",description:"Message for success toast on copying entity ID"},copiedIDPUrlToClipboard:{id:"workspaceIdentity.copiedIDPUrlToClipboard",defaultMessage:"Copied IDP URL to clipboard",description:"Message for success toast on copying IDP URL"},orDivider:{id:"workspaceIdentity.orDivider",defaultMessage:"or",description:"Separator between the top and bottom portions of the form"},certExtractFailed:{id:"workspaceIdentity.certExtractFailed",defaultMessage:"Unable to find X.509 Certificate in provided XML",description:"Notice to the user that the given XML did not contain a certificate"},ssoUrlExtractFailed:{id:"workspaceIdentity.ssoUrlExtractFailed",defaultMessage:"Unable to find Entity ID (sign-in endpoint) in provided XML",description:"Notice to the user that the given XML did not contain an entity ID"},ssoLearnMoreLink:{id:"workspaceIdentity.ssoLearnMoreLink",defaultMessage:"Learn more",description:"Label for link to learn more"}}),ep=function(e){var t=e.title,n=e.footer,o=e.children;return(0,l.jsxs)(et,{children:[(0,l.jsx)(ee,{children:(0,l.jsx)(y.Z,(0,c._)({},t))}),(0,l.jsx)("div",{className:"container mx-auto my-6",children:o}),(0,l.jsx)(eo,{children:n})]})},eh=function(e){var t=e.icon,n=e.title,o=e.body,i=e.toggle;return(0,l.jsxs)(et,{children:[(0,l.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-2",children:(0,l.jsx)(t,{className:"icon-sm"})}),(0,l.jsx)(en,{children:(0,l.jsx)(y.Z,(0,c._)({},n))})]}),(0,l.jsx)("div",{children:i})]}),(0,l.jsx)(eo,{children:o})]})};function eg(e){var t,n,o,i,a,s=e.currentWorkspaceId,r=(0,I.Z)(),d=(0,H.a)({queryKey:["workspace/identity",s],queryFn:(0,L._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return[4,B.ZP.getWorkspaceIdentitySettings(s)];case 1:return[2,e.sent()]}})})}).data,x=$(s).mutateAsync,M=(t=(0,I.Z)(),(0,U.D)({mutationFn:function(e){var n=e.shouldAutoProvision;return B.ZP.setWorkspaceShouldAutoProvision(s,n).then(function(e){var o=n?es.autoProvisionEnabledToast:es.autoProvisionDisabledToast;return R.m.success(t.formatMessage(o),{duration:3}),e}).catch(function(e){throw R.m.danger(e.message),e})}})),T=M.variables,k=M.mutateAsync,C=(null==d?void 0:d.sso_connection)!==null,N=null==d?void 0:d.domains.some(function(e){return e.status===f.pT.VERIFIED}),_=C?ev.ssoEditButton:ev.ssoAddButton,D=(0,u._)((0,m.useState)(!1),2),A=D[0],P=D[1],Z=(null==d?void 0:null===(n=d.sso_connection)||void 0===n?void 0:n.status)==="ACTIVE",O=null==d?void 0:null===(o=d.sso_connection)||void 0===o?void 0:o.id;return d?(0,l.jsxs)("div",{className:"mx-auto max-w-xl px-4 py-8",children:[(0,l.jsx)(b(),{children:(0,l.jsx)("title",{children:r.formatMessage(ev.title)})}),(0,l.jsx)("div",{className:"mb-10 text-center text-2xl font-medium",children:(0,l.jsx)(y.Z,(0,c._)({},ev.title))}),(0,l.jsx)(ei,{}),(0,l.jsx)(ep,{title:ev.domainSubtitle,footer:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(y.Z,(0,c._)({},ev.verifyDomainInfoText))}),children:(0,l.jsx)(ed,{domains:d.domains,workspaceId:s})}),(0,l.jsx)(ei,{}),(0,l.jsx)(eh,{icon:p,title:ev.autoProvisionTitle,body:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(y.Z,(0,c._)({},ev.autoProvisionBody))}),toggle:(0,l.jsx)(S.Z,{disabled:!N,enabled:null!==(a=null==T?void 0:T.shouldAutoProvision)&&void 0!==a?a:d.should_auto_provision,onChange:function(e){k({shouldAutoProvision:e})},label:r.formatMessage(ev.toggleAutoProvisionLabel)})}),(0,l.jsx)(ei,{}),(0,l.jsxs)(et,{children:[(0,l.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-2",children:(0,l.jsx)(h,{className:(0,v.default)("icon-sm",Z?"text-blue-600":"text-gray-400")})}),(0,l.jsx)(ee,{children:(0,l.jsx)(y.Z,(0,c._)({},ev.ssoTitle))})]}),C&&(0,l.jsx)("div",{children:(0,l.jsx)(S.Z,{enabled:Z,onChange:function(){x({connectionId:O,active:!Z})},label:r.formatMessage(ev.ssoToggleActive)})})]}),N&&(0,l.jsx)(eu,{acsId:d.acs_id,hasSSO:C}),(0,l.jsxs)("div",{children:[(0,l.jsx)(j.z,{as:"button",color:"primary",disabled:!N,onClick:function(){P(!0)},className:"font-medium",children:(0,l.jsx)(y.Z,(0,c._)({},_))}),(0,l.jsx)(ef,{workspaceId:s,data:d.sso_connection,isOpen:A,onClose:function(){return P(!1)}})]})]}),(0,l.jsx)(ei,{}),d.sso_connection&&(0,l.jsx)(eh,{icon:g.Z,title:ev.enforceSSOTitle,body:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(y.Z,(0,c._)({},ev.enforceSSOBody))}),toggle:(0,l.jsx)(S.Z,{disabled:!N,enabled:null===(i=d.sso_connection.auth0_enforced_clients)||void 0===i?void 0:i.includes("chat"),onChange:function(e){x({connectionId:d.sso_connection.id,enforcedClients:e?["chat"]:[]})},label:r.formatMessage(ev.enforceSSOLabel)})})]}):(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,l.jsx)(w.Z,{})})}var ev=(0,M.vU)({title:{id:"workspaceIdentity.title",defaultMessage:"Identity & Provisioning",description:"Title of identity page"},domainSubtitle:{id:"workspaceIdentity.domainSubtitle",defaultMessage:"Domain management",description:"Section header of domain management"},ssoTitle:{id:"workspaceIdentity.ssoTitle",defaultMessage:"Single Sign On",description:"Section title of SSO"},ssoToggleActive:{id:"WorkspaceIdentityPage.ssoToggleActive",defaultMessage:"Enable SSO for this workspace",description:"Label for toggle to activate SSO"},ssoAddButton:{id:"workspaceIdentity.ssoAddButton",defaultMessage:"Add SAML SSO",description:"Label for add SSO button"},ssoEditButton:{id:"workspaceIdentity.ssoEditButton",defaultMessage:"Edit SAML SSO",description:"Label for edit SSO button"},autoProvisionTitle:{id:"workspaceIdentity.autoProvisionSubtitle",defaultMessage:"Automatic account creation",description:"Subtitle for auto provisioning"},autoProvisionBody:{id:"workspaceIdentity.autoProvisionBody",defaultMessage:"Automatically create ChatGPT Enterprise accounts for new users who log in with a verified domain.",description:"Label for toggling automatic provisioning"},toggleAutoProvisionLabel:{id:"workspaceIdentity.toggleAutoProvisionLabel",defaultMessage:"Toggle to enable or disable auto provisioning",description:"Label for auto provisioning toggle"},enforceSSOTitle:{id:"workspaceIdentity.enforceSSOTitle",defaultMessage:"Enforce SSO log in",description:"Section title for toggling SSO enforcement"},enforceSSOBody:{id:"workspaceIdentity.enforceSSOBody",defaultMessage:"When SSO is active, users will no longer be able to use social logins and will be redirected to your SSO portal.",description:"Message telling users what enforcing SSO will do"},enforceSSOLabel:{id:"workspaceIdentity.enforceSSOLabel",defaultMessage:"Toggle to enable or disable SSO enforcement",description:"Label for toggle for SSO enforcement"},verifyDomainInfoText:{id:"workspaceIdentity.verifyDomainInfoText",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on.",description:"Informational text for domain verification section"},learnMoreLink:{id:"workspaceIdentity.learnMoreLink",defaultMessage:"Learn more",description:"Label for link to learn more"}}),ex=n(43267),eb=!0;function ey(e){return(0,l.jsx)(eg,(0,c._)({},e))}ey.getLayout=function(e){return(0,l.jsx)(ex.default,{mobilePageTitle:"Identity",children:e})}},16266:function(e,t,n){"use strict";var o=n(70079);let i=o.forwardRef(function({title:e,titleId:t,...n},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z",clipRule:"evenodd"}))});t.Z=i}},function(e){e.O(0,[2104,3267,9774,2888,179],function(){return e(e.s=15255)}),_N_E=e.O()}]);