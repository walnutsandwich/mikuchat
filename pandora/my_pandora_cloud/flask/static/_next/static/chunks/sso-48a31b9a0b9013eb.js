"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8682],{95624:function(e,n,t){t.r(n),t.d(n,{GizmoAccessToggle:function(){return f}});var i,s=t(96237),r=t(35250),o=t(67273),l=t(10580),a=t(20522),c=t(69520),d=t(1454),u="disable",m=(i={},(0,s._)(i,a.Mo.LessProminent,"Gizmo - Variant 1"),(0,s._)(i,a.Mo.LessProminentAtToken,"Gizmo - Variant 2"),(0,s._)(i,a.Mo.MoreProminent,"Gizmo - Variant 3"),(0,s._)(i,a.Mo.LessProminentCollapseSidebar,"Gizmo - Variant 4"),(0,s._)(i,a.Mo.LessProminentBottomBar,"Gizmo - Variant 5"),(0,s._)(i,a.Mo.Discord,"Gizmo - Variant 6"),(0,s._)(i,a.Mo.NewChatDock,"Gizmo - Variant 7"),(0,s._)(i,a.Mo.SidebarList,"Gizmo - Variant 8"),(0,s._)(i,u,"Prototype disabled"),i);function f(){var e=(0,a.bU)(function(e){return null!=e.disabledTimestamp?u:e.displayVariant});return(0,r.jsxs)(l.Z.Root,{value:"".concat(e),onValueChange:function(e){if(e===u)a.lx.disableGizmoUI();else{var n=parseInt(e);a.lx.enableGizmoUI(n)}},children:[(0,r.jsx)(c.xz,{children:(0,r.jsxs)(o.z,{size:"small",color:"neutral",className:"text-xs",children:[m[e],(0,r.jsx)(d.bTu,{className:"icon-xs"})]})}),(0,r.jsx)(l.Z.Portal,{children:(0,r.jsxs)(l.Z.Content,{children:[[a.Mo.LessProminent,a.Mo.LessProminentAtToken,a.Mo.MoreProminent,a.Mo.LessProminentCollapseSidebar,a.Mo.LessProminentBottomBar,a.Mo.Discord,a.Mo.NewChatDock,a.Mo.SidebarList].map(function(e){return(0,r.jsx)(l.Z.Item,{value:"".concat(e),children:m[e]},e)}),(0,r.jsx)(l.Z.Item,{value:u,children:m[u]})]})})]})}},79144:function(e,n,t){t.r(n),t.d(n,{GizmoChatEmptyStateWithDock:function(){return m}});var i=t(35250),s=t(36338),r=t(98107),o=t(69385),l=t(41919),a=t(19841),c=t(9181),d=t.n(c),u=t(1454);function m(e){var n=e.clientThreadId,t=e.currentModel,r=(0,s.DT)(n);return(0,i.jsxs)("div",{className:"relative h-full",children:[(0,i.jsx)("div",{className:"absolute left-0 right-0 top-8 flex justify-center",children:(0,i.jsx)(g,{clientThreadId:n})}),(0,i.jsx)("div",{className:"flex h-full items-center justify-center pb-24",children:(0,i.jsx)("div",{className:"max-w-md px-4 text-center text-2xl font-medium",children:null!=r?(0,i.jsx)(f,{gizmoId:r}):"How can I help you today?"})}),null==r?(0,i.jsx)("div",{className:"absolute right-2 top-2",children:(0,i.jsx)(l.GizmoModelSwitcher,{currentModel:t})}):null]})}function f(e){var n=e.gizmoId,t=(0,o.b9)(n).data;return null==t?null:(0,i.jsx)("div",{children:t.config.assistant_welcome_message})}function g(e){var n=e.clientThreadId,t=(0,o.K2)().data,l=(void 0===t?{}:t).items,a=(0,s.DT)(n);return(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(p,{gizmo:void 0,isActive:null==a}),r.bS.map(function(e){var n=null==l?void 0:l.find(function(n){return n.id===e});return null==n?null:(0,i.jsx)(p,{gizmo:n,isActive:n.id===a},n.id)}),null==a||r.bS.includes(a)?null:(0,i.jsx)(h,{gizmoId:a}),(0,i.jsxs)(d(),{href:"/gizmo/explore",shallow:!0,className:"flex w-14 flex-col items-center text-token-text-tertiary",children:[(0,i.jsx)("div",{className:"gizmo-shadow-stroke flex h-8 w-8 items-center justify-center rounded-full bg-brand-purple text-white",children:(0,i.jsx)(u.aCJ,{className:"icon-sm"})}),(0,i.jsx)("div",{className:"mt-2 text-center text-xs",children:"Browse"})]})]})}function p(e){var n=e.gizmo,t=e.isActive;return(0,i.jsxs)(d(),{href:null!=n?(0,s.l1)(n.id):"/",shallow:!0,className:(0,a.default)("flex w-14 flex-col items-center",t?"":"text-token-text-tertiary"),children:[(0,i.jsx)("div",{className:(0,a.default)("gizmo-shadow-stroke h-8 w-8 rounded-full",t&&"outline outline-1 outline-offset-2 outline-token-text-primary"),children:null!=n?(0,i.jsx)("img",{src:n.profile_pic_permalink,alt:"Agent",className:"overflow-hidden rounded-full object-cover"}):(0,i.jsx)("div",{className:"h-full rounded-full bg-black"})}),(0,i.jsx)("div",{className:"mt-2 text-center text-xs",children:null!=n?n.name:"ChatGPT"})]})}function h(e){var n=e.gizmoId,t=(0,o.b9)(n).data;return null==t?null:(0,i.jsx)(p,{gizmo:t,isActive:!0})}},22179:function(e,n,t){t.r(n),t.d(n,{GizmoConversationHeader:function(){return y}});var i=t(22830),s=t(35250),r=t(6038),o=t(36338),l=t(64082),a=t(80479),c=t(20522),d=t(99805),u=t(46020),m=t(78931),f=t(66085),g=t(47428),p=t(62509),h=t(60554),x=t(70079),v=t(1454),j=t(44548),b=t(32550);function y(e){var n,t,y=e.clientThreadId,_=e.workspaceId,w=e.conversationTemplateId,N=(0,o.GS)(_,w,{includeDeleted:!0}).data,k=(0,m.hz)().has("debug"),T=(0,u.tN)(function(e){return e.isDesktopNavCollapsed}),I=(0,c.bU)(c.rc.isGizmoDiscordVariant),P=(0,h.useRouter)(),C=(0,m.ec)(m.F_.accountUserId),z=null===(n=(0,p.kP)().session)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id,M=null!=N&&null!=C&&null!=z&&(0,b.k)(N,C,z,_),S=(0,f.xj)(null==N?void 0:N.id),G=(0,f.J8)(null==N?void 0:N.id),A=(0,a.jh)(null==N?void 0:N.config.enabled_tools),D=(0,i._)((0,x.useState)(!1),2),Z=D[0],E=D[1],F=(0,o.cH)(y),O=F.requiresPlugins&&!F.isLoading;return null==N?null:(0,s.jsxs)(d.QT,{$spaceForCollapsedSidebar:T&&!I,children:[Z&&(0,s.jsx)(j.Z,{pluginIds:A,onClose:function(){return E(!1)}}),(0,s.jsxs)("div",{className:"ml-2 flex items-center gap-2 text-lg",children:[(0,s.jsx)(d.i1,{size:"large",children:(0,s.jsx)(r.Py,{conversationTemplate:N,iconSize:"gizmo",className:"!rounded-lg"})}),N.name]}),O&&(0,s.jsx)(d.y4,{color:"danger",onClick:function(){return E(!0)},children:"Install required plugins"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.y4,{disabled:!0,children:(0,s.jsx)(v.A8q,{size:20})}),(0,s.jsxs)(g.fC,{children:[(0,s.jsx)(g.xz,{children:(0,s.jsx)(d.y4,{children:(0,s.jsx)(v.K9M,{size:20})})}),(0,s.jsxs)(g.VY,{className:"min-w-10 rounded-lg border border-gray-100 bg-white shadow-lg dark:border-gray-700 dark:bg-gray-900",children:[(0,s.jsxs)(d.UA,{onSelect:function(){P.push((0,o.l1)(N.id),void 0,{shallow:!0})},children:[(0,s.jsx)(v.IC0,{size:20}),"New Chat with ",N.name]}),M?(0,s.jsxs)(d.UA,{onSelect:function(){P.push(S,void 0,{shallow:!0})},children:[(0,s.jsx)(v.IYd,{size:20}),"Edit GPT"]}):(0,s.jsxs)(d.UA,{onSelect:function(){(0,l.O)(N.id)},children:[(0,s.jsx)(v.H33,{size:20}),"Inspect"]}),(0,s.jsxs)(d.UA,{onSelect:function(){P.push(G,void 0,{shallow:!0})},children:[(0,s.jsx)(v.PJJ,{size:20}),"Remix"]}),k&&(0,s.jsxs)(d.UA,{onSelect:function(){u.vm.toggleActiveSidebar("debug")},children:[(0,s.jsx)(v.cDN,{size:20}),"Debug"]})]})]})]})]})}},737:function(e,n,t){t.r(n),t.d(n,{GizmoDiscordSidebar:function(){return N}});var i=t(35250),s=t(36338),r=t(45635),o=t(98107),l=t(69385),a=t(80267),c=t(12346),d=t(54673),u=t(22123),m=t(32550),f=t(37469),g=t(78931),p=t(62509),h=t(19841),x=t(61888),v=t(9181),j=t.n(v),b=t(60554),y=t.n(b),_=t(70079),w=t(1454);function N(e){var n,t,r=e.clientThreadId,a=(0,l.K2)().data,f=(void 0===a?{}:a).items,h=(0,s.DT)(r),v=(0,c.Fr)().openSettings,b=(0,g.ec)(function(e){var n=e.currentWorkspace;return null==n?void 0:n.accountUserId}),y=null===(n=(0,p.kP)().session)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id,N=(0,g.ec)(g.F_.businessWorkspaceId),P=(0,_.useMemo)(function(){return null!=b?(0,u.getRecentGizmoTemplateIds)(b):[]},[b]),C=null!=f&&null!=b&&null!=y?(0,x.sortBy)(f,function(e){var n;return[(n=o.bS.indexOf(e.id))>=0?n:1/0,P.includes(e.id)?0:1,(0,m.k)(e,b,y,N)?0:1]}).slice(0,12):[],z=(0,s.DT)(r);return(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"w-16 border-r border-token-border-light",children:(0,i.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,i.jsxs)("div",{className:"flex grow flex-col items-center space-y-2 overflow-auto pt-2",children:[(0,i.jsx)(k,{gizmo:void 0,isActive:null==z}),null!=z&&C.every(function(e){return e.id!==z})?(0,i.jsx)(T,{activeGizmoId:z}):null,C.map(function(e){return(0,i.jsx)(k,{gizmo:e,isActive:e.id===z},e.id)}),(0,i.jsx)(j(),{href:"/gizmo/explore",shallow:!0,className:"relative flex h-10 w-10 flex-shrink-0 items-center justify-center overflow-hidden rounded-xl bg-brand-purple",children:(0,i.jsx)(w.aCJ,{className:"icon-sm text-white"})})]}),(0,i.jsx)(d.W,{onClickSettings:function(){return v()}})]})}),(0,i.jsx)(I,{clientThreadId:r,gizmoId:h,gizmos:f},h)]})}function k(e){var n,t=e.gizmo,o=e.isActive;return(0,i.jsx)(r.u,{label:(0,i.jsxs)("div",{className:"text-left",children:[(0,i.jsx)("div",{children:null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"ChatGPT"}),(0,i.jsx)("div",{className:"opacity-50",children:null==t?"Your default assistant":t.description})]}),side:"right",withArrow:!1,children:(0,i.jsxs)(j(),{href:null!=t?(0,s.l1)(t.id):"/",shallow:!0,className:(0,h.default)("relative block h-10 w-10 flex-shrink-0 overflow-hidden rounded-xl outline outline-2 outline-offset-2 transition",o?"outline-token-text-secondary":"outline-transparent hover:outline-token-text-tertiary"),children:[null!=t?(0,i.jsx)("img",{src:t.profile_pic_permalink,alt:"Agent",className:"object-cover"}):(0,i.jsx)("div",{className:"h-full bg-black"}),(0,i.jsx)("div",{className:"absolute inset-0 rounded-xl shadow-[inset_0_0_0_1px_rgba(0,0,0,0.1)]"})]})})}function T(e){var n=e.activeGizmoId,t=(0,l.b9)(n).data;return null==t?null:(0,i.jsx)(k,{gizmo:t,isActive:!0})}function I(e){var n=e.clientThreadId,t=e.gizmoId,s=e.gizmos,r=null!=t?null==s?void 0:s.find(function(e){return e.id===t}):void 0;return(0,i.jsx)("div",{className:"w-64 flex-shrink-0 border-r border-token-border-light",children:null==t||null!=r?(0,i.jsx)(P,{clientThreadId:n,gizmo:r}):null})}function P(e){var n,t,r=e.clientThreadId,o=e.gizmo,l=(0,f.XK)(r);return(0,i.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-2",children:[(0,i.jsxs)("div",{className:"px-2 pb-4 pt-2",children:[(0,i.jsx)("div",{className:"font-medium",children:null!==(n=null==o?void 0:o.name)&&void 0!==n?n:"ChatGPT"}),(0,i.jsx)("div",{className:"text-sm text-token-text-secondary",children:null==o?"Your default assistant":null==o?void 0:o.description})]}),(0,i.jsx)("div",{className:"border-b border-token-border-light py-2",children:(0,i.jsxs)(j(),{href:null!=o?(0,s.l1)(o.id):"/",shallow:!0,className:(0,h.default)("flex w-full items-center gap-2 rounded p-2 text-sm font-medium",null==l?"bg-token-surface-tertiary":"hover:bg-token-surface-secondary"),children:[(0,i.jsx)(w.vPQ,{className:"icon-sm"}),"New chat"]})})]}),(0,i.jsx)("div",{className:"grow overflow-auto px-2",children:(0,i.jsx)(a.Z,{activeId:r,onNewThread:function(){y().push("/",void 0,{shallow:!0})},filterConversation:function(e){return e.conversation_template_id===(null!==(t=null==o?void 0:o.id)&&void 0!==t?t:null)}})})]})}},49652:function(e,n,t){t.d(n,{V:function(){return eR}});var i,s,r,o,l,a,c=t(21722),d=t(39324),u=t(71209),m=t(22830),f=t(4337),g=t(38104),p=t(35250),h=t(75641),x=t(53776),v=t(36338),j=t(64082),b=t(80479),y=t(67273),_=t(79579),w=t(89368),N=t(45635),k=t(47044),T=t(22558),I=t(77224),P=t(89314),C=t(78781),z=t(63031),M=t(69385),S=t(58659),G=t(99805),A=t(14444),D=t(52481),Z=t(1821),E=t(88798),F=t(42569),O=t(95137),B=t(37469),L=t(46020),U=t(78931),R=t(28861),V=t(10664),W=t(47428),H=t(62509),q=t(18719),J=t(73426),K=t(19841),Y=t(61888),Q=t(60554),X=t(70079),$=t(76483),ee=t(1454),en=t(70671),et=t(21389),ei=t(58914),es=t(14099),er=t(60790),eo=X.memo(function(e){var n,t=e.conversationTemplate,i=e.setConversationTemplate,s=e.clientThreadId;(0,B.ax)(s);var r=(0,B.UL)(s),o=(0,er.gizmoEditorPlaygroundContextMessage)(t);null==o.config.model_slug&&(o.config.model_slug=F.dO);var l=null!=o.config.assistant_welcome_message?"You are in **GPT edit mode**. You can talk to me normally, or you can **tell me to change my behavior**.\n\n".concat(o.config.assistant_welcome_message):"Hello there! I'm new. To set me up, **describe to me what I do**.\n\nYou can say something like:\n- You browse the internet to find local news and generate a PDF of the summary.\n- Your name is Blackbeard, and you talk like a pirate and generate images where people have to find clues to solve your riddle.";(0,v.BZ)(s,l);var a=(0,m._)((0,X.useState)(t),2),f=a[0],h=a[1];(0,X.useEffect)(function(){var e=(0,b.jh)(o.config.enabled_tools);!(0,B.Zz)(s)||!B.iN.hasThread(s)||r.lastModelUsed===o.config.model_slug&&(0,Y.isEqual)(r.pluginIds,e)||(B.tQ.getOrInitThread(s),B.tQ.updateInitialThreadDataForNewThread(s,o.config.model_slug,e))},[s,r,o,r.lastModelUsed,r.pluginIds,o.config.model_slug,o.config.enabled_tools]);var x=(0,X.useMemo)(function(){return{playgroundTemplate:o}},[o]),j=(0,X.useCallback)((n=(0,c._)(function(e){var n,s,r,o,l,a,c,m,f,p;return(0,g.Jh)(this,function(g){switch(g.label){case 0:return[4,(0,er.gizmoDialogExtractFieldUpdates)(e)];case 1:if(null==(n=g.sent()))return[2];return h(p=(0,u._)((0,d._)({},t),{name:null!==(s=n.name)&&void 0!==s?s:t.name,description:null!==(r=n.description)&&void 0!==r?r:t.description,config:{context_message:null!==(o=n.contextMessage)&&void 0!==o?o:t.config.context_message,model_slug:null!==(l=n.modelSlug)&&void 0!==l?l:t.config.model_slug,assistant_welcome_message:null!==(a=n.welcomeMessage)&&void 0!==a?a:t.config.assistant_welcome_message,enabled_tools:null!==(c=n.tools)&&void 0!==c?c:t.config.enabled_tools},profile_pic_id:null!==(m=n.profilePicId)&&void 0!==m?m:t.profile_pic_id,profile_pic_permalink:null!==(f=n.profilePicPermalink)&&void 0!==f?f:t.profile_pic_permalink})),i(p),[2]}})}),function(e){return n.apply(this,arguments)}),[i,t,h]),y=(0,X.useCallback)(function(e,n){(0,Y.isEqual)(f,t)||((0,er.insertTemplateUpdateMessages)(e,n,t,f),h(t))},[f,t]);return(0,p.jsx)(ei.h.Provider,{value:x,children:(0,p.jsx)(es.Z,{initialThreadData:r,clientThreadId:s,onCompletionFinished:j,preRequestCompletion:y,hideHeader:!0})})}),el=t(81949),ea=t(51959),ec=t(35427),ed=t(2864),eu=t(52478);function em(e){var n=e.onAddPluginId,t=e.selectedPluginIds,i=(0,m._)((0,X.useState)(""),2),s=i[0],r=i[1],o=(0,eu.ZP)({pageSize:10,filter:eu.JF.All,query:s,page:0}),l=o.isLoading,a=o.items;return(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"mb-2 block",children:"Add a plugin"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("input",{type:"text",value:s,onChange:function(e){return r(e.target.value)},className:"block w-full rounded dark:bg-gray-800"}),l&&(0,p.jsx)(Z.Z,{className:"absolute right-3 top-3"})]}),s.length>0&&a&&(0,p.jsx)("ul",{className:"mt-4 space-y-1",children:a.filter(function(e){return!t.includes(e.id)}).map(function(e){return(0,p.jsxs)("li",{className:"my-0.5 flex gap-2",children:[(0,p.jsx)("button",{type:"button",onClick:function(){return n(e.id)},className:"flex h-6 w-6 items-center justify-center rounded border bg-green-500 font-semibold text-white hover:text-green-700 dark:border-black dark:text-black",children:(0,p.jsx)(ee.OvN,{})}),(0,p.jsx)("span",{className:"truncate text-ellipsis",children:e.manifest.name_for_human})]},e.id)})})]})}function ef(e){var n=e.pluginIds,t=e.setPluginIds,i=e.onClose;return(0,p.jsx)(w.Z,{isOpen:!0,onClose:i,type:"success",title:"Add Plugin",children:(0,p.jsx)(em,{onAddPluginId:function(e){return t((0,el._)(n).concat([e]))},selectedPluginIds:n})})}function eg(e){var n=e.pluginIds,t=e.setPluginIds,i=(0,ed.K)(n),s=i.plugins,r=i.isLoading,o=(0,m._)((0,X.useState)(!1),2),l=o[0],a=o[1];return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"mb-2 font-medium",children:["Plugins (",n.length," Enabled)"]}),r?(0,p.jsx)(Z.Z,{}):s.length>0?(0,p.jsx)("ul",{className:"mb-3 space-y-1",children:s.map(function(e){return(0,p.jsxs)("li",{className:"my-0.5 flex items-center gap-2 text-sm",children:[(0,p.jsx)("button",{type:"button",onClick:function(){return t(n.filter(function(n){return n!==e.id}))},className:"flex h-6 w-6 items-center justify-center rounded border bg-red-500 font-semibold text-white hover:text-red-700 dark:border-black dark:text-black",children:(0,p.jsx)(ee.q5L,{})}),(0,p.jsx)("span",{className:"truncate text-ellipsis",children:e.manifest.name_for_human})]},e.id)})}):null,(0,p.jsx)(y.z,{type:"button",color:"neutral",size:"large",onClick:function(){a(!0)},children:"Add Plugin"}),l&&(0,p.jsx)(ef,{pluginIds:n,setPluginIds:t,onClose:function(){a(!1)}})]})}function ep(e){var n=e.label,t=e.disabled,i=void 0!==t&&t,s=e.value,r=(0,X.useId)();return(0,p.jsxs)("div",{className:(0,K.default)("flex items-center gap-2",i?"opacity-50":""),children:[(0,p.jsx)(ec.ck,{id:r,value:s,disabled:i,className:"flex h-5 w-5 items-center justify-center rounded-full border border-token-border-medium bg-white",children:(0,p.jsx)(ec.z$,{className:"h-2 w-2 rounded-full bg-gray-700"})}),(0,p.jsx)("label",{htmlFor:r,className:"cursor-pointer text-sm",children:n})]})}function eh(e){var n=e.name,t=e.tool,i=e.enabledTools,s=e.onEnabledToolsChange,r=e.disabled,o=function(e){return i.some(function(n){return n.tool_id===e})};return(0,p.jsx)(ea.Z,{id:t,label:n,checked:o(t),disabled:r,onChange:function(){o(t)?s(i.filter(function(e){return e.tool_id!==t})):s((0,el._)(i).concat([{tool_id:t}]))}})}function ex(e){var n,t=e.modelSlug,i=e.onModelChange,s=e.enabledTools,r=e.onEnabledToolsChange,a=(0,F.OX)(),c=[o.GPT_4,l.Default];t===F.rB?c=[o.GPT_3_5,l.Default]:t===F.dO&&(c=[o.GPT_4,l.Default]);var d=(0,m._)(null!==(n=function(e,n){if("gpt-4-dalle"===e)return[o.GPT_4,l.DallE];var t=!0,i=!1,s=void 0;try{for(var r,a=n[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var c=r.value,d=!0,u=!1,m=void 0;try{for(var f,g=Object.values(l)[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var p=f.value;if(p!==l.DallE&&c[p]===e)return[c.category,p]}}catch(e){u=!0,m=e}finally{try{d||null==g.return||g.return()}finally{if(u)throw m}}}}catch(e){i=!0,s=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw s}}}(t,a))&&void 0!==n?n:c,1)[0],u=(0,b.jh)(s);return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("div",{className:"mb-2 font-medium",children:"Model"}),(0,p.jsxs)(ec.fC,{value:d,onValueChange:function(e){switch(e){case o.GPT_3_5:i(F.rB);break;case o.GPT_4:i(F.dO)}},className:"space-y-1.5",children:[(0,p.jsx)(ep,{label:"GPT-3.5",value:o.GPT_3_5}),(0,p.jsx)(ep,{label:"GPT-4",value:o.GPT_4})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"mb-2 font-medium",children:"Abilities"}),(0,p.jsxs)("div",{className:"spac-y-1.5",children:[(0,p.jsx)(eh,{name:"Browsing",tool:h.qK.Browser,enabledTools:s,onEnabledToolsChange:r}),(0,p.jsx)(eh,{name:"Dall\xb7e Image Generation",tool:h.qK.DallE,enabledTools:s,onEnabledToolsChange:r,disabled:d===o.GPT_3_5}),(0,p.jsx)(eh,{name:"Coding Sandbox",tool:h.qK.Python,enabledTools:s,onEnabledToolsChange:r})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)(eg,{pluginIds:u,setPluginIds:function(e){r((0,el._)(s.filter(function(e){return null==(0,b.jK)(e)})).concat((0,el._)(e.map(function(e){return(0,b.Q0)(e)}))))}})})]})]})}(i=o||(o={})).GPT_3_5="gpt_3.5",i.GPT_4="gpt_4",(s=l||(l={})).Default="default_model",s.DallE="dalle",s.Browsing="browsing_model",s.Code="code_interpreter_model",s.Plugins="plugins_model";var ev=t(44548),ej=t(6038),eb=t(67),ey=t(9181),e_=t.n(ey);function ew(e){var n,t=e.conversationTemplate,i=(0,Q.useRouter)(),s=null!=t?"/gizmo/editor?id=".concat(t.id):"/gizmo/editor",r=i.asPath===s;return(0,p.jsxs)(e_(),{href:s,shallow:!0,className:(0,K.default)("flex items-center gap-2 rounded-lg px-3 py-2 text-sm",r?"bg-gray-100 dark:bg-gray-700":"hover:bg-gray-50 dark:hover:bg-gray-700"),children:[null!=t?(0,p.jsx)(ej.Ao,{templateId:t.id,iconSize:"small"}):(0,p.jsx)("div",{className:"flex h-4 w-4 items-center justify-center rounded-sm bg-gray-300 dark:bg-gray-600",children:(0,p.jsx)(ee.OvN,{className:"icon-xs text-white"})}),null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"New GPT"]})}function eN(){var e=(0,M._e)().data;return(0,p.jsxs)("div",{className:"flex w-64 flex-shrink-0 flex-col border-r border-token-border-light p-2",children:[(0,p.jsx)("div",{className:"pb-4 pl-1 pt-1",children:(0,p.jsx)(eb.m,{})}),(0,p.jsx)("div",{className:"mb-2 px-3 text-sm font-medium text-token-text-tertiary",children:"My GPTs"}),(0,p.jsxs)("div",{className:"grow space-y-0.5 overflow-auto",children:[(0,p.jsx)(ew,{conversationTemplate:void 0}),null==e?void 0:e.items.map(function(e){return(0,p.jsx)(ew,{conversationTemplate:e},e.id)})]})]})}function ek(e){var n=e.value,t=e.icon,i=e.label;return(0,p.jsxs)(ec.ck,{value:n,className:"inline-flex items-center gap-2 px-3 py-2 text-sm radix-state-checked:bg-green-500 radix-state-checked:text-white",children:[(0,p.jsx)(t,{className:"icon-sm"}),i]})}function eT(e){var n=e.value,t=e.onValueChange;return(0,p.jsxs)(ec.fC,{value:n,onValueChange:t,className:"inline-flex overflow-hidden rounded-lg border border-token-border-medium",children:[(0,p.jsx)(ek,{value:v.Ou.Private,icon:ee.UIZ,label:"Draft"}),(0,p.jsx)(ek,{value:v.Ou.Published,icon:ee._rq,label:"Published"})]})}var eI=t(32550);function eP(){var e=(0,f._)(["mb-6"]);return eP=function(){return e},e}function eC(){var e=(0,f._)(["w-full text-sm overflow-y-auto rounded border bg-transparent px-3 py-2 focus:ring-2 focus:ring-blue-400 dark:border-gray-900 dark:bg-gray-700"]);return eC=function(){return e},e}function ez(){var e=(0,f._)(["text-sm text-red-500"]);return ez=function(){return e},e}var eM=et.Z.div(eP());function eS(e,n){return null==n?e:(n=function e(n){return"object"==typeof n&&null!=n?Array.isArray(n)?n.map(e):Object.fromEntries(Object.entries(n).map(function(n){var t=(0,m._)(n,2);return[t[0],e(t[1])]})):null===n?void 0:n}(n),(0,u._)((0,d._)({},e,n),{config:(0,d._)({},e.config,n.config)}))}function eG(e){switch(e){case a.NoChanges:return"No changes to save";case a.Loading:return"Loading";case a.UploadingProfilePic:return"Uploading profile picture";case a.TemplateNameTooLong:return"Template name too long";case a.TemplateDescriptionTooLong:return"Template description too long";case a.NameEmpty:return"Template name cannot be empty";case a.ContextMessageEmpty:return"Context message cannot be empty";case a.WelcomeMessageEmpty:return"Welcome message cannot be empty";case a.ProfilePicEmpty:return"Profile picture cannot be empty";default:return(0,R.Z)(e),""}}function eA(e){var n,t,i=e.name.length>v.h5,s=(null!==(t=null===(n=e.description)||void 0===n?void 0:n.length)&&void 0!==t?t:0)>v.Ip,r=[];return(null==e?void 0:e.name)===""&&r.push(a.NameEmpty),""===e.config.context_message&&r.push(a.ContextMessageEmpty),i&&r.push(a.TemplateNameTooLong),s&&r.push(a.TemplateDescriptionTooLong),""===e.config.assistant_welcome_message&&r.push(a.WelcomeMessageEmpty),(null==e?void 0:e.profile_pic_id)==null&&(null==e?void 0:e.profile_pic_permalink)==null&&r.push(a.ProfilePicEmpty),r}function eD(e){var n=e.label,t=e.description;return(0,p.jsxs)("div",{className:"mb-1",children:[(0,p.jsx)("label",{className:"block font-medium text-token-text-primary",children:n}),null!=t?(0,p.jsx)("div",{className:"text-md mb-2 text-sm text-token-text-tertiary",children:t}):null]})}function eZ(e){var n=e.onDelete,t=e.onClose;return(0,p.jsx)(w.Z,{isOpen:!0,onClose:t,type:"danger",title:"Delete chat template",primaryButton:(0,p.jsx)(_.ZP.Button,{title:"Delete template",color:"danger",onClick:function(){n()}}),secondaryButton:(0,p.jsx)(_.ZP.Button,{title:"Cancel",color:"neutral",onClick:t}),children:(0,p.jsx)("div",{className:"text-sm",children:"Are you sure you want to delete this template? This cannot be undone."})})}function eE(e){var n,t,i,s,r,o,l,a,u,m,f=e.conversationTemplate,x=e.workspaceId,j=e.updateConversationTemplate,_=e.setIsUploadingProfilePic,w=e.setShowConfirmDeleteModal,N=(0,F.B9)(),M=null!==(r=null==f?void 0:f.config.model_slug)&&void 0!==r?r:F.dO,G=null!==(o=null==f?void 0:f.config.enabled_tools)&&void 0!==o?o:[],A=M?N.get(M):void 0,D=(0,b.jh)(G),Z=null==A?void 0:null===(t=A.enabledTools)||void 0===t?void 0:t.includes("tools3");A&&!Z&&D.length>0&&j({config:{enabled_tools:G.filter(function(e){return null==(0,b.jK)(e)})}});var E=(0,en.Z)(),B=(0,$.uI)((0,d._)({disabled:!1,noClick:!0,onDropAccepted:function(e){q.A.logEvent(J.M.uploadFile,{eventSource:"mouse",intent:I.A.Gizmo.toString()}),e.length>0&&e.forEach(function(e){C.Dw.uploadFile((0,P.W7)(e),e,I.A.Gizmo,(0,z.p0)(A),E,!0)})},multiple:!0,maxSize:k.xC,maxFiles:10},(0,z.Z8)((0,z.Zp)(A)))).open,L=(null!==(l=null==f?void 0:null===(i=f.name)||void 0===i?void 0:i.length)&&void 0!==l?l:0)>v.h5,U=(null!==(a=null==f?void 0:null===(s=f.description)||void 0===s?void 0:s.length)&&void 0!==a?a:0)>v.Ip,R=(null==f?void 0:f.published_at)!=null?v.Ou.Published:v.Ou.Private;return(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsxs)("div",{className:"grow p-6",children:[(0,p.jsxs)(eM,{children:[(0,p.jsx)(eD,{label:"Name"}),(0,p.jsx)("input",{type:"text",className:"w-full resize-none overflow-y-auto rounded border bg-transparent px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-400 dark:border-gray-900 dark:bg-gray-700",placeholder:"Short descriptive name",value:null!==(u=null==f?void 0:f.name)&&void 0!==u?u:"",onChange:function(e){j({name:e.target.value})},onBlurCapture:function(){return j({name:null==f?void 0:f.name},!0)}}),L?(0,p.jsxs)(eV,{className:"mt-1",children:["Template names cannot be longer than"," ",v.h5," characters."]}):null]}),(0,p.jsxs)(eM,{children:[(0,p.jsx)(eD,{label:"Profile Picture"}),(0,p.jsx)("div",{className:"mb-2 flex items-center gap-2",children:(0,p.jsx)(S.O,{conversationTemplate:f,onFileChange:(n=(0,c._)(function(e){var n;return(0,g.Jh)(this,function(t){switch(t.label){case 0:if(!(null!=e&&"uploading"!==e&&null!=e.fileId))return[3,2];return[4,O.ZP.getFileDownloadLink(e.fileId)];case 1:return(n=t.sent()).status===h.KF.Success&&j({profile_pic_id:null!=e.fileId?e.fileId:void 0,profile_pic_permalink:n.download_url}),[3,3];case 2:j({profile_pic_id:void 0,profile_pic_permalink:void 0}),t.label=3;case 3:return _("uploading"===e),[2]}})}),function(e){return n.apply(this,arguments)})})})]}),(0,p.jsx)(eM,{children:(0,p.jsx)(ex,{modelSlug:M,onModelChange:function(e){return j({config:{model_slug:e}})},enabledTools:G,onEnabledToolsChange:function(e){j({config:{enabled_tools:e}})}})}),(0,p.jsxs)(eM,{children:[(0,p.jsx)(eD,{label:"Upload Files",description:""}),(0,p.jsxs)("div",{className:"flex",children:[(0,p.jsx)("div",{children:(0,p.jsx)(y.z,{size:"medium",onClick:B,children:"Upload File"})}),(0,p.jsx)("div",{children:(0,p.jsx)(T.Z,{displayType:"button"})})]})]}),(0,p.jsxs)(eM,{children:[(0,p.jsx)(eD,{label:"Behavior",description:"Describe what this GPT is and what it does. Include information about it’s tone of voice, the style and length of response, and any additional or specific information it should know."}),(0,p.jsx)(eF,{rows:8,value:null==f?void 0:f.config.context_message,onChange:function(e){return j({config:{context_message:e.target.value}})},onBlurCapture:function(){return j({config:{context_message:null==f?void 0:f.config.context_message}},!0)}})]}),(0,p.jsxs)(eM,{children:[(0,p.jsx)(eD,{label:"Welcome Message",description:"When a user starts a new chat with this GPT, what should it say? It can be helpful to give examples of what this GPT does and how best to interact with it."}),(0,p.jsx)(eF,{rows:8,value:null==f?void 0:f.config.assistant_welcome_message,onChange:function(e){return j({config:{assistant_welcome_message:e.target.value}})},onBlurCapture:function(){return j({config:{assistant_welcome_message:null==f?void 0:f.config.assistant_welcome_message}},!0)}})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"mb-3 text-lg font-medium",children:"Sharing"}),(0,p.jsx)(eT,{value:R,onValueChange:function(e){j({published_at:e===v.Ou.Published?new Date().toISOString():void 0})}}),(0,p.jsx)("div",{className:"mb-2 mt-3 text-xs text-token-text-secondary",children:R===v.Ou.Private?"This template can only be used by you.":null!=x?"This template can be used by anyone in this workspace.":"This template can used by anyone."}),(0,p.jsxs)(eM,{className:"mt-4",children:[(0,p.jsx)(eD,{label:"Description",description:"A publicly visible blurb about this GPT."}),(0,p.jsx)(eF,{value:null!==(m=null==f?void 0:f.description)&&void 0!==m?m:void 0,rows:5,onChange:function(e){return j({description:e.target.value})},onBlurCapture:function(){return j({description:null==f?void 0:f.description},!0)}}),U?(0,p.jsxs)(eV,{className:"mt-1",children:["Template descriptions cannot be longer than"," ",v.Ip," characters."]}):null]}),(null==f?void 0:f.id)!=null&&(0,p.jsx)(eM,{className:"mt-8",children:(0,p.jsxs)(y.z,{type:"button",onClick:function(){w(!0)},color:"danger-outline",children:[(0,p.jsx)(ee.Ybf,{className:"icon-sm"}),"Delete template"]})})]})]})})}(r=a||(a={}))[r.NoChanges=0]="NoChanges",r[r.Loading=1]="Loading",r[r.UploadingProfilePic=2]="UploadingProfilePic",r[r.TemplateNameTooLong=3]="TemplateNameTooLong",r[r.TemplateDescriptionTooLong=4]="TemplateDescriptionTooLong",r[r.NameEmpty=5]="NameEmpty",r[r.ContextMessageEmpty=6]="ContextMessageEmpty",r[r.WelcomeMessageEmpty=7]="WelcomeMessageEmpty",r[r.ProfilePicEmpty=8]="ProfilePicEmpty";var eF=et.Z.textarea(eC()),eO=function(e){var n,t,i,s=e.businessWorkspaceId,r=e.conversationTemplate,o=(0,m._)((0,X.useState)(function(){return(0,B.OX)()}),2),l=o[0];o[1];var f=(0,m._)((0,X.useState)(r),2),h=f[0],j=f[1],b=(0,m._)((0,X.useState)(eS(x.x,r)),2),_=b[0],w=b[1],k=function(e,n){n&&(e=function e(n){return"string"==typeof n?n.trim():"object"==typeof n&&null!=n?Object.fromEntries(Object.entries(n).map(function(n){var t=(0,m._)(n,2);return[t[0],e(t[1])]})):n}(e));var t=eS(_,e);(0,Y.isEqual)(t,_)||w(t)},T=(0,A.C)(),I=!T.isLoading&&(null===(t=_.config.enabled_tools)||void 0===t?void 0:t.some(function(e){var n;return(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.plugin_id)!=null&&!T.installedPlugins.some(function(n){var t;return n.id===(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.plugin_id)})})),P=(0,m._)((0,X.useState)(!1),2),z=P[0],S=P[1],Z=(0,L.tN)(function(e){return e.activeSidebar}),O=(0,M.Rx)(),R=(0,M.Xr)(),V=(n=(0,c._)(function(e){var n,t,i,r,o,l,a,c;return(0,g.Jh)(this,function(m){switch(m.label){case 0:if(n=C.HR.getReadyFiles(C.gF.getState()),(t=eA(e)).length>0)return E.m.warning("Could not save GPT:\n\n".concat(t.map(function(e){return"- ".concat(eG(e))}).join("\n")),{duration:3}),[2];if(l={name:e.name,description:null!==(i=e.description)&&void 0!==i?i:"",config:{contextMessage:e.config.context_message,assistantWelcomeMessage:null!==(r=e.config.assistant_welcome_message)&&void 0!==r?r:"Hello",modelSlug:null!==(o=e.config.model_slug)&&void 0!==o?o:F.dO,enabledTools:e.config.enabled_tools},publish:null!=e.published_at,icon:v.bj.Box,color:(0,v.yq)(),profilePicId:e.profile_pic_id,profilePictureUrl:null==e.profile_pic_id?e.profile_pic_permalink:void 0,workspaceId:s},!((null==e?void 0:e.id)!=null))return[3,2];return a=(null==h?void 0:h.config.context_message)!==e.config.context_message,[4,R.mutateAsync({gizmoId:e.id,templateData:l},{onSuccess:function(){a?E.m.success("Template saved. Changes only apply to new chats.",{duration:3}):E.m.success("Template saved.",{duration:3}),j(e)}})];case 1:return m.sent(),[3,4];case 2:return c=n.map(function(e){return{file_id:e.fileSpec.id,name:e.fileSpec.name,size:e.fileSpec.size,type:e.file.type,last_modified:e.file.lastModified}}),[4,O.mutateAsync({templateData:(0,u._)((0,d._)({},l),{files:c})},{onSuccess:function(n){E.m.success("Template created.",{duration:3});var t=eS(e,{id:n.id});w(t),j(t)}})];case 3:m.sent(),m.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),H=(null==_?void 0:_.id)==null||!(0,Y.isEqual)(_,h),q=(0,m._)((0,X.useState)(!0),2),J=q[0],$=q[1],en=O.isLoading||R.isLoading,et=_.name.length>v.h5,ei=null!=_.published_at?v.Ou.Published:v.Ou.Private,es=(0,m._)((0,X.useState)(!1),2),er=es[0],el=es[1],ea=(0,m._)((0,X.useState)(!1),2),ec=ea[0],ed=ea[1],eu=(0,M.kb)(),em=(0,Q.useRouter)(),ef=(0,U.hz)(),eg=eA(_);H||eg.push(a.NoChanges),en&&eg.push(a.Loading),er&&eg.push(a.UploadingProfilePic);var ep=eg.length>0;return(0,p.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between gap-4 border-b px-6 py-2 font-semibold dark:border-gray-900",children:[(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("span",{className:"whitespace-pre text-transparent",children:""!=_.name?_.name:"New"}),(0,p.jsx)("input",{type:"text",placeholder:"New",className:"absolute bottom-0 left-0 right-0 top-0 border-0 bg-transparent p-0 focus:ring-0",value:_.name,onChange:function(e){k({name:e.target.value})},onBlurCapture:function(){return k({name:_.name},!0)}})]}),(0,p.jsx)(eT,{value:ei,onValueChange:function(e){k({published_at:e===v.Ou.Published?new Date().toISOString():void 0})}}),et?(0,p.jsxs)(eV,{className:"mt-1",children:["Template names cannot be longer than"," ",v.h5," characters."]}):null]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsxs)(W.fC,{children:[(0,p.jsx)(W.xz,{children:(0,p.jsx)(G.y4,{children:(0,p.jsx)(ee.K9M,{size:20})})}),(0,p.jsxs)(W.VY,{className:"min-w-10 z-20 mt-2 rounded-lg border border-gray-100 bg-white shadow-lg dark:border-gray-700 dark:bg-gray-900",children:[(0,p.jsxs)(G.UA,{className:"lg:hidden",children:[(0,p.jsx)(ee.BVE,{className:"icon-sm"}),"Test Run"]}),(0,p.jsxs)(G.UA,{disabled:!0,children:[(0,p.jsx)(ee.OeJ,{className:"icon-sm"}),"Add to Marketplace"]}),(0,p.jsxs)(G.UA,{disabled:!0,children:[(0,p.jsx)(ee.C3L,{className:"icon-sm"}),"Duplicate"]}),(0,p.jsxs)(G.UA,{disabled:!0,children:[(0,p.jsx)(ee.WY8,{className:"icon-sm"}),"Manage Access"]}),(0,p.jsxs)(G.UA,{disabled:!0,children:[(0,p.jsx)(ee.TCC,{className:"icon-sm"}),"View Versions"]}),ef.has("debug")&&(0,p.jsxs)(G.UA,{onClick:function(){L.vm.toggleActiveSidebar("debug")},children:[(0,p.jsx)(ee.cDN,{className:"icon-sm"}),"Debug"]}),(0,p.jsx)(W.Z0,{}),(null==_?void 0:_.id)!=null&&(0,p.jsxs)(G.UA,{className:"text-red-500",onClick:function(){return ed(!0)},children:[(0,p.jsx)(ee.Ybf,{className:"icon-sm"}),"Delete"]})]})]}),(0,p.jsx)(G.y4,{onClick:function(){return(null==_?void 0:_.id)!=null&&em.push((0,v.l1)(_.id))},disabled:null==_.id,className:"hidden lg:block",children:"Test Run"}),(0,p.jsx)(G.y4,{disabled:!0,children:"Share"}),(0,p.jsx)(N.u,{label:eg.map(eG).join("\n"),children:(0,p.jsx)(G.y4,{loading:en,onClick:function(){V(_)},className:"cursor-pointer",color:"primary",disabled:ep,children:(null==_?void 0:_.id)!=null?"Save":"Create"})}),(0,p.jsx)("div",{className:"my-2 border-l dark:border-gray-900"}),(0,p.jsx)(G.y4,{onClick:function(){$(!J)},className:(0,K.default)(J&&"!bg-green-50 dark:!bg-green-800"),children:"Advanced"})]})]}),z&&(0,p.jsx)(ev.Z,{pluginIds:(0,Y.compact)(null===(i=_.config.enabled_tools)||void 0===i?void 0:i.map(function(e){var n;return null===(n=e.data)||void 0===n?void 0:n.plugin_id})),onClose:function(){return S(!1)}}),(0,p.jsxs)("div",{className:"relative flex grow overflow-hidden",children:[(0,p.jsxs)("div",{className:(0,K.default)("min-w-1/2 relative flex-grow overflow-y-scroll border-token-border-light",J&&"hidden lg:block"),children:[(0,p.jsx)(eo,{conversationTemplate:_,setConversationTemplate:function(e){var n="function"==typeof e?e(_):e;w(n),V(n)},clientThreadId:l},l),I&&(0,p.jsxs)("div",{className:"max-md:left-6 max-md:right-6 absolute inset-y-1/2 left-16 right-16 flex h-fit flex-col items-center justify-center space-y-2 rounded border bg-gray-50 px-2 py-4 opacity-80 dark:border-gray-700 dark:bg-gray-900",children:[(0,p.jsx)("div",{className:"text-center text-lg font-medium text-token-text-primary",children:"Install plugins"}),(0,p.jsx)("div",{className:"text-center text-token-text-tertiary",children:"This template requires plugins that are not installed. Please install them to test your GPT."}),(0,p.jsx)("div",{className:"text-center text-token-text-tertiary",children:"Note that installing plugins may have you leave this page."}),(0,p.jsx)(y.z,{color:"danger",onClick:function(){return S(!0)},children:"Install required plugins"})]})]}),"debug"===Z&&(0,p.jsx)(D.fv,{clientThreadId:l,slideOver:!1,onClose:function(){return L.vm.toggleActiveSidebar("debug")},isOpen:!0}),J&&(0,p.jsx)("div",{className:"w-full flex-shrink-0 overflow-y-scroll border-l dark:border-gray-900 dark:bg-gray-900 lg:w-[400px]",children:(0,p.jsx)(eE,{conversationTemplate:_,updateConversationTemplate:k,workspaceId:s,setIsUploadingProfilePic:el,setShowConfirmDeleteModal:ed})}),ec&&(0,p.jsx)(eZ,{onDelete:(0,c._)(function(){return(0,g.Jh)(this,function(e){switch(e.label){case 0:if((null==_?void 0:_.id)==null)return[2];return[4,eu.mutateAsync({gizmoId:_.id})];case 1:return e.sent(),E.m.success("Chat template deleted",{duration:3}),em.push("/gizmo/editor",void 0,{shallow:!0}),[2]}})}),onClose:function(){ed(!1)}})]})]})};function eB(e){var n,t,i=e.businessWorkspaceId,s=e.conversationTemplateId,r=(0,M.b9)(s).data,o=(0,U.ec)(U.F_.accountUserId),l=null===(n=(0,H.kP)().session)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id,a=null!=r&&null!=o&&null!=l&&(0,eI.k)(r,o,l,i);return(0,X.useEffect)(function(){r&&void 0!==o&&!a&&(0,j.O)(r.id)},[a,o,r]),null!=r&&a?(0,p.jsx)(eO,{businessWorkspaceId:i,conversationTemplate:r}):null}function eL(e){var n=e.businessWorkspaceId,t=e.remixSourceTemplateId,i=(0,M.kg)(t).data,s=null!=i?(0,u._)((0,d._)({},i),{id:void 0}):void 0;return(0,p.jsx)(eO,{businessWorkspaceId:n,conversationTemplate:s})}function eU(e){var n=e.conversationTemplateId,t=e.remixSourceTemplateId,i=(0,U.$T)(),s=(0,U.ec)(U.F_.businessWorkspaceId);return i?(0,p.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,p.jsx)(Z.Z,{})}):(0,p.jsx)("div",{children:void 0!=n?(0,p.jsx)(eB,{businessWorkspaceId:s,conversationTemplateId:n}):(0,p.jsx)(eL,{businessWorkspaceId:s,remixSourceTemplateId:t})})}function eR(e){var n=e.conversationTemplateId,t=e.remixSourceTemplateId,i=(0,Q.useRouter)();return(0,V.yx)({resetThreadAction:function(){i.push("/")}}),(0,p.jsxs)("div",{className:"flex overflow-y-scroll",children:[(0,p.jsx)(eN,{}),(0,p.jsx)("div",{className:"grow",children:(0,p.jsx)(eU,{conversationTemplateId:n,remixSourceTemplateId:t},null!=n?n:"new")})]})}var eV=et.Z.div(ez())},24089:function(e,n,t){t.r(n);var i=t(35250),s=t(91995),r=t(77400),o=t(67203),l=t(98592),a=t(70079),c=t(94968);function d(e){var n=e.messages,t=e.isFirstMessageInTurn,a=n.flatMap(function(e){return"multimodal_text"===e.message.content.content_type?e.message.content.parts.filter(function(e){return"object"==typeof e&&"asset_pointer"in e}):[]}),c=(0,s.H)(a);return(0,i.jsx)("div",{children:c.map(function(e,a){var c=e.isLoading,d=e.data,u=e.error;if(c)return(0,i.jsx)(o.Z,{conversationMessages:n,icon:l.CJ,status:o.X.Finished,displayMessage:f.generatedProfilePic,isFirstMessageInTurn:t,estimatedToolDurationMs:r.X_,animationLoopDurationMs:4e3},a);if(null!=u||(null==d?void 0:d.url)==null)return(0,i.jsx)(o.Z,{conversationMessages:n,icon:l.uP,status:o.X.Error,displayMessage:f.failedProfilePic,isFirstMessageInTurn:t,estimatedToolDurationMs:0},a);var m=d.url,g=d.width,p=d.height;return(0,i.jsx)(s.sH,{alt:"test",src:m,width:g,height:p},a)})})}function u(e){var n=e.messages,t=e.isFirstMessageInTurn;return 0===n.length?null:(0,i.jsx)(o.Z,{conversationMessages:n,icon:l.CJ,status:o.X.Running,displayMessage:f.generatingProfilePic,isFirstMessageInTurn:t,estimatedToolDurationMs:r.X_})}function m(e){var n=e.messages,t=e.isFirstMessageInTurn;return n.some(function(e){return"in_progress"===e.message.status})?(0,i.jsx)(o.Z,{conversationMessages:n,icon:l.uP,status:o.X.Running,displayMessage:f.updating,isFirstMessageInTurn:t,estimatedToolDurationMs:1e4}):(0,i.jsx)(o.Z,{conversationMessages:n,icon:l.uP,status:o.X.Finished,displayMessage:f.updated,isFirstMessageInTurn:t,estimatedToolDurationMs:1e4})}n.default=a.memo(function(e){var n=e.messages,t=e.isFirstMessageInTurn,s=[],r=[],o=[],l=!0,a=!1,c=void 0;try{for(var f,g=n[Symbol.iterator]();!(l=(f=g.next()).done);l=!0){var p=f.value;"gizmo_editor.generate_profile_pic"===p.message.recipient?s.push(p):"gizmo_editor.generate_profile_pic"===p.message.author.name?r.push(p):"gizmo_editor.update_behavior"===p.message.recipient&&o.push(p)}}catch(e){a=!0,c=e}finally{try{l||null==g.return||g.return()}finally{if(a)throw c}}return(0,i.jsxs)(i.Fragment,{children:[s.length>0&&0===r.length&&(0,i.jsx)(u,{messages:s,isFirstMessageInTurn:t}),r.length>0&&(0,i.jsx)(d,{messages:r,isFirstMessageInTurn:t}),o.length>0&&(0,i.jsx)(m,{messages:o,isFirstMessageInTurn:t})]})});var f=(0,c.vU)({updating:{id:"message.gizmo.updating",defaultMessage:"Updating GPT...",description:"Message displayed when the GPT editor is updating"},updated:{id:"message.gizmo.finished",defaultMessage:"GPT Behavior updated.",description:"Message displayed when the GPT editor is finished updating"},generatingProfilePic:{id:"message.gizmo.generatingProfilePic",defaultMessage:"Generating profile picture...",description:"Message displayed when the GPT editor is generating a profile picture"},generatedProfilePic:{id:"message.gizmo.generatedProfilePic",defaultMessage:"Generated profile picture prompt.",description:"Message displayed when the GPT editor is finished generating a profile picture"},failedProfilePic:{id:"message.gizmo.failed",defaultMessage:"Failed to generate profile picture.",description:"Message displayed when the GPT editor failed to generate a profile picture"}})},22123:function(e,n,t){t.r(n),t.d(n,{addRecentGizmoTemplateId:function(){return l},getRecentGizmoTemplateIds:function(){return o}});var i=t(81949),s=t(6948);function r(e){return"oai/apps/".concat(e,"/gizmo-history")}function o(e){var n,t=r(e);return null!==(n=s.m.getItem(t))&&void 0!==n?n:[]}function l(e,n){var t=[n].concat((0,i._)(o(e).filter(function(e){return e!==n}))),l=r(e);s.m.setItem(l,t)}},44548:function(e,n,t){t.d(n,{Z:function(){return f}});var i=t(22830),s=t(35250),r=t(91809),o=t(67273),l=t(89368),a=t(9884),c=t(14444),d=t(2864),u=t(1821),m=t(70079);function f(e){var n=e.pluginIds,t=e.onClose,f=(0,c.C)(),g=new Set(f.installedPlugins.map(function(e){return e.id})),p=n.filter(function(e){return!g.has(e)}),h=(0,d.K)(p),x=(0,i._)((0,m.useState)(),2),v=x[0],j=x[1];return(0,m.useEffect)(function(){0==p.length&&t()},[p.length,t]),(0,s.jsxs)(s.Fragment,{children:[null!=v&&(0,s.jsx)(a.Z,{plugin:v,onInstall:function(){return j(void 0)},onClose:function(){return j(void 0)}}),(0,s.jsx)(l.Z,{isOpen:!0,onClose:t,type:"success",title:"Install Required Plugins",children:h.isLoading?(0,s.jsx)(u.Z,{}):(0,s.jsx)("ul",{children:h.plugins.map(function(e){return(0,s.jsxs)("li",{className:"my-4 flex w-full gap-2",children:[(0,s.jsx)(o.z,{onClick:function(){return j(e)},children:"Install"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden",children:[(0,s.jsx)(r.Z,{url:e.manifest.logo_url,name:e.manifest.name_for_human,className:"flex-shrink-0",size:36}),(0,s.jsx)("span",{className:"truncate text-ellipsis",children:e.manifest.name_for_human})]})]},e.id)})})})]})}},41919:function(e,n,t){t.r(n),t.d(n,{GizmoModelSwitcher:function(){return u}});var i=t(35250),s=t(92720),r=t(44510),o=t(42569),l=t(72198),a=t(47428),c=t(1454);function d(e){var n=e.option,t=e.prefixNameWithGPT4,l=e.isSelected,a=(0,o.fm)(),d=(0,r.xT)();return(0,i.jsxs)(s.Z.Item,{onClick:function(){var e=n.value;a(e),d(e)},children:[(0,i.jsxs)("span",{children:[void 0!==t&&t&&"GPT-4 ",n.name]}),l&&(0,i.jsx)(c.UgA,{className:"icon-sm absolute right-2 top-2"})]},n.value)}function u(e){var n=e.currentModel,t=(0,l.ZP)(),r=null==n?void 0:n.id,o=t.find(function(e){return"gpt_4"===e.categoryId}),u=t.find(function(e){return"other"===e.categoryId});return(0,i.jsxs)(s.Z.Root,{children:[(0,i.jsx)(s.Z.Trigger,{asChild:!0,children:(0,i.jsx)("button",{children:(0,i.jsxs)("div",{className:"flex items-center gap-1 text-xs text-token-text-tertiary",children:[null==n?void 0:n.title," ",(0,i.jsx)(c.bTu,{className:"icon-xs"})]})})}),(0,i.jsx)(s.Z.Portal,{children:(0,i.jsxs)(s.Z.Content,{align:"end",children:[null!=o&&o.options.map(function(e){return(0,i.jsx)(d,{option:e,prefixNameWithGPT4:!0,isSelected:r===e.value},e.value)}),(0,i.jsx)(a.Z0,{}),null!=u&&u.options.map(function(e){return(0,i.jsx)(d,{option:e,isSelected:r===e.value},e.value)})]})})]})}},24305:function(e,n,t){t.r(n),t.d(n,{GizmoNewConversation:function(){return ei}});var i,s,r=t(39324),o=t(22830),l=t(4337),a=t(81949),c=t(35250),d=t(95954),u=t(6038),m=t(36338),f=t(61402),g=t(3299),p=t(45635),h=t(47044),x=t(22558),v=t(65261),j=t(54986),b=t(77224),y=t(78781),_=t(63031),w=t(98107),N=t(69385),k=t(67),T=t(20522),I=t(99805),P=t(59100),C=t(88327),z=t(50253),M=t(2295),S=t(37469),G=t(78931),A=t(66085),D=t(82920),Z=t(19841),E=t(61888),F=t(9181),O=t.n(F),B=t(60554),L=t(70079),U=t(76483),R=t(2827),V=t(1454),W=t(70671),H=t(21389),q=t(22123),J=t(41919);function K(){var e=(0,l._)(["mt-2 px-3 text-sm font-medium text-token-text-tertiary first:mt-0"]);return K=function(){return e},e}function Y(){var e=(0,l._)(["flex h-6 w-6 items-center justify-center bg-gray-500 dark:bg-gray-900"]);return Y=function(){return e},e}(i=s||(s={}))[i.Header=0]="Header",i[i.Agent=1]="Agent",i[i.Create=2]="Create",i[i.Browse=3]="Browse",i[i.HistoryConversation=4]="HistoryConversation";var Q="Create GPT",X="Explore all GPTs";function $(e,n){return n.replace(/[^a-zA-Z0-9 ]/g,"").toLowerCase().split(" ").every(function(n){return e.replace(/[^a-zA-Z0-9 ]/g,"").toLowerCase().split(" ").some(function(e){return e.startsWith(n)})})}function ee(e,n){return $(n.kind===s.Agent?n.agent.name:n.kind===s.Create?Q:n.kind===s.Browse?X:n.kind===s.HistoryConversation?n.conversation.title:(0,D.ZP)(n),e)}function en(e,n){return null!=e.config.assistant_welcome_message&&("mine"===n||null!=e.profile_pic_permalink)}function et(e){return e>=0?e:1/0}function ei(e){var n,t,i,r=e.clientThreadId,l=e.onRequestCompletion,d=e.currentModel,u=(0,T.bU)(function(e){return e.displayVariant}),m=(0,o._)((0,L.useState)(""),2),f=m[0],g=m[1],p=(0,N.K2)().data,h=(0,N._e)().data,x=(0,M.MO)().conversations,v=(0,y.gF)(function(e){return e.files.length>0}),j=(0,G.ec)(function(e){var n=e.currentWorkspace;return null==n?void 0:n.accountUserId}),b=(0,L.useMemo)(function(){return null!=j?(0,q.getRecentGizmoTemplateIds)(j):[]},[j]),_=(0,L.useMemo)(function(){return(0,E.shuffle)(null==p?void 0:p.items)},[null==p?void 0:p.items]),I=(0,L.useMemo)(function(){return(0,a._)(null!==(n=null==h?void 0:h.items)&&void 0!==n?n:[]).sort(function(e,n){return Date.parse(null!==(t=n.updated_at)&&void 0!==t?t:"")-Date.parse(null!==(i=e.updated_at)&&void 0!==i?i:"")})},[null==h?void 0:h.items]),P=(0,L.useMemo)(function(){return(0,E.shuffle)(w.YM)},[]),C=v?[]:u===T.Mo.MoreProminent?function(e,n,t,i,r,o){var l=e.flatMap(function(e){var i=null==t?void 0:t.find(function(n){return n.id===e});if(null!=i&&en(i,"mine"))return[i];var s=null==n?void 0:n.find(function(n){return n.id===e});return null!=s&&en(s,"other")?[s]:[]}),c=null!==(x=null==t?void 0:t.filter(function(e){return!Object.values(w.ap).includes(e.id)&&en(e,"mine")}))&&void 0!==x?x:[],d=function(e){var t=null==n?void 0:n.find(function(n){return n.id===e});return null!=t?[t]:[]},u=w.bS.flatMap(d),m=o.flatMap(d),f=[w.ap.NEW_GPT].flatMap(d),g=(null!=n?n:[]).filter(function(e){return!(null==t?void 0:t.some(function(n){return n.id===e.id}))&&!Object.values(w.ap).includes(e.id)&&en(e,"other")}),p={kind:s.Create},h={kind:s.Browse};if(""===i){var x,v=[];return l.length>0&&v.push.apply(v,(0,a._)(l.slice(0,3).map(function(e){return{kind:s.Agent,agent:e,group:"recent"}}))),c.length>0&&v.push.apply(v,(0,a._)(c.slice(0,3).map(function(e){return{kind:s.Agent,agent:e,group:"my"}}))),(u.length>0||m.length>0||g.length>0)&&v.push.apply(v,(0,a._)((0,a._)(u).concat((0,a._)(m),(0,a._)(g)).slice(0,6).map(function(e){return{kind:s.Agent,agent:e,group:"explore"}}))),v.push(p,h),v}var j=(0,a._)(c).concat((0,a._)(u),(0,a._)(m),(0,a._)(g),(0,a._)(f)),b=(0,a._)(j.map(function(e){return{kind:s.Agent,agent:e}})).concat([p,h]).filter(function(e){return ee(i,e)}).slice(0,5);if(b.length<5){var y=r.filter(function(e){return $(e.title,i)}).slice(0,5-b.length);return(0,a._)(b).concat((0,a._)(y.map(function(e){return{kind:s.HistoryConversation,conversation:e}})))}return b}(b,_,I,f,x,P):function(e,n,t,i,r,o){var l=[];if(!o||"@"===i[0]){var c,d=o?i.slice(1):i,u=null!==(c=null==t?void 0:t.filter(function(e){return en(e,"mine")}))&&void 0!==c?c:[],m=(null!=n?n:[]).filter(function(e){return!(null==t?void 0:t.some(function(n){return n.id===e.id}))&&en(e,"other")}),f=(0,E.sortBy)((0,a._)(u).concat((0,a._)(m)),function(n){return[et(e.indexOf(n.id)),et(u.findIndex(function(e){return e.id===n.id})),et(w.bS.indexOf(n.id)),et(m.findIndex(function(e){return e.id===n.id}))]});l=(0,a._)(f.map(function(n){return{kind:s.Agent,agent:n,group:e.includes(n.id)?"recent":void 0}})).filter(function(e){return ee(d,e)}).slice(0,5)}if(l.length<5){var g=r.filter(function(e){return $(e.title,i)}).slice(0,5-l.length);return(0,a._)(l).concat((0,a._)(g.map(function(e){return{kind:s.HistoryConversation,conversation:e}})))}return l}(b,_,I,f,x,u===T.Mo.LessProminentAtToken),z=(0,o._)((0,L.useState)("textarea"),2),S=z[0],A=z[1];"number"==typeof S&&S>=C.length&&A(0===C.length?"textarea":C.length-1);var D=(0,c.jsx)(er,{textareaValue:f,setTextareaValue:g,clientThreadId:r,onRequestCompletion:l,listItems:C,focusedItemIndex:S,setFocusedItemIndex:A,currentModel:d,displayVariant:u}),Z=u===T.Mo.MoreProminent?(0,c.jsx)(ec,{listItems:C,focusedItemIndex:S,setFocusedItemIndex:A,showGroupHeaders:""===f}):""===f?(0,c.jsx)(ep,{recentlyUsedGizmoIds:b,myGizmos:null==h?void 0:h.items,listedGizmos:null==p?void 0:p.items,className:u===T.Mo.LessProminentBottomBar?"mb-4":"mt-6"}):(0,c.jsx)(em,{listItems:C,focusedItemIndex:S,setFocusedItemIndex:A,className:u===T.Mo.LessProminentBottomBar?"bottom-full mb-4":"top-full mt-4"});return(0,c.jsxs)("div",{className:"relative h-full px-2 pt-[36vh] sm:px-8",children:[(0,c.jsxs)("div",{className:"group relative mx-auto h-full w-full lg:max-w-[670px] xl:max-w-[766px]",children:[(0,c.jsxs)("div",{className:"mb-9 flex items-center justify-center gap-1 text-4xl font-semibold",children:["ChatGPT ",(0,c.jsx)(k.X,{className:"relative top-px h-7 w-7"})]}),u===T.Mo.LessProminentBottomBar?(0,c.jsxs)("div",{className:"absolute bottom-4 left-0 right-0",children:[Z,D]}):(0,c.jsxs)(c.Fragment,{children:[D,Z]})]}),(0,c.jsx)("div",{className:"absolute right-1 top-1",children:(0,c.jsx)(J.GizmoModelSwitcher,{currentModel:d})})]})}function es(e,n,t,i){var s=S.tQ.getThreadCurrentLeafId(e),r=(0,g.J)(n,t),o=r.content,l=r.attachments,a=l.length>0?{attachments:l}:{},c="new-conversation-user-node-id";S.tQ.updateTree(e,function(e){e.addNode(c,o,s,d.uU.User,void 0,a)}),i(d.Os.Next,c,{},!0)}function er(e){var n,t=e.clientThreadId,i=e.textareaValue,o=e.setTextareaValue,l=e.onRequestCompletion,a=e.listItems,d=e.focusedItemIndex,u=e.setFocusedItemIndex,g=e.currentModel,w=e.displayVariant,N=(0,B.useRouter)(),k=(0,S.Hk)(t),I=(0,f.Yk)(k),P=(0,A.J8)(),M=(0,_.YN)(g),G=(0,L.useRef)(null),E=(0,y.gF)(function(e){return e.files}),F=(0,y.gF)(y.HR.hasUploadInProgress),O=E.length>0,H=(O?!F:""!==i)&&!I,q=(M===b.A.Multimodal?h.Ql:h.dO)-E.length,J=q<=0,K=(0,W.Z)(),Y=(0,v.Sv)(K,(0,_.YN)(g),(0,_.p0)(g),"mouse").handleFileAccepted,Q=M!==b.A.None,X=(0,U.uI)((0,r._)({disabled:!Q||J,noClick:!0,onDropAccepted:Y,onDropRejected:function(e){return(0,v.UJ)(e,K,M)},multiple:!0,maxSize:h.xC,maxFiles:q},(0,_.Z8)((0,_.Zp)(g)))),$=X.getInputProps,ee=X.open;return(0,L.useEffect)(function(){y.Dw.reset()},[g]),M===b.A.ContextConnector?n=(0,c.jsx)(x.Z,{displayType:"icon"}):!J&&Q&&(n=(0,c.jsx)(j.Z,{openFileDialog:ee,getInputProps:$,uploadType:M,customIcon:(0,c.jsx)(V.UH,{className:"icon-md"})})),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:(0,Z.default)("flex overflow-hidden rounded-2xl border border-token-border-medium transition focus-within:border-token-border-heavy focus-within:shadow-[0_3px_3px_0_rgba(0,0,0,0.05)]",w===T.Mo.MoreProminent?"bg-gray-50 dark:bg-gray-700":"bg-transparent"),children:[(0,c.jsx)(R.ZP,{value:i,onChange:function(e){o(e.target.value)},rows:1,placeholder:"Send a message",autoFocus:!0,onKeyDown:function(e){if("Enter"!==e.key||e.shiftKey)"ArrowUp"===e.key?"textarea"!==d&&(e.preventDefault(),u(function(e){return"number"==typeof e?e>0?e-1:"textarea":e})):"ArrowDown"===e.key?a.length>0&&("textarea"===d||d<a.length-1)&&(e.preventDefault(),u(function(e){if("textarea"===e){if(a.length>0)return 0}else if(e<a.length-1)return e+1;return e})):"textarea"!==d&&u("textarea");else{e.preventDefault();var n="textarea"!==d?a[d]:void 0;null!=n?N.push(n.kind===s.Agent?(0,m.l1)(n.agent.id):n.kind===s.Browse?"/gizmo/explore":n.kind===s.Create?P:n.kind===s.HistoryConversation?(0,A.ZV)(n.conversation.id):(0,D.ZP)(n),void 0,{shallow:!0}):H&&null!=g&&es(t,g,i,l)}},className:"max-h-32 w-full grow resize-none border-0 bg-transparent p-4",ref:G}),(0,c.jsxs)("div",{className:"mr-3 mt-2.5 flex items-start gap-1",children:[w!==T.Mo.LessProminentAtToken||""!==i||O?null:(0,c.jsx)(p.u,{label:"Select a GPT",side:"top",sideOffset:4,children:(0,c.jsx)("button",{onClick:function(){var e;o("@"),null===(e=G.current)||void 0===e||e.focus()},className:"flex p-2 text-token-text-tertiary opacity-50 transition hover:opacity-100",children:(0,c.jsx)(V.BQk,{className:"icon-md"})})}),null!=n?(0,c.jsx)("div",{className:"relative mt-1 p-1 leading-none opacity-50 transition hover:opacity-100",children:n}):null,(0,c.jsx)(p.u,{label:"Send message",side:"top",sideOffset:4,children:(0,c.jsx)("button",{onClick:function(){H&&null!=g&&es(t,g,i,l)},disabled:!H||null==g,className:"cursor-pointer p-2 text-token-text-tertiary transition disabled:opacity-50",children:(0,c.jsx)(C.IX,{className:"icon-md"})})})]})]}),E.length>0&&(0,c.jsx)(z.nR,{files:E}),w===T.Mo.MoreProminent?(0,c.jsx)("div",{className:"mt-3 text-center text-[0.8rem] text-gray-400",children:a.length>0?(0,c.jsxs)("span",{children:["Use ",(0,c.jsx)(V.tv1,{className:"inline-block h-4 w-4"}),(0,c.jsx)(V.iRh,{className:"inline-block h-4 w-4"})," to navigate"]}):"Press enter to send"}):null]})}function eo(e){var n=e.listItem;return n.kind===s.Agent&&"recent"===n.group?(0,c.jsx)(V.TCC,{className:"icon-sm flex-shrink-0 text-token-text-tertiary"}):n.kind===s.HistoryConversation?(0,c.jsx)(V.EQ9,{className:"icon-sm flex-shrink-0 text-token-text-tertiary"}):(0,c.jsx)(V.Rgz,{className:"icon-sm flex-shrink-0 text-token-text-tertiary"})}function el(e){var n=e.conversation;return null!=n.conversation_template_id?(0,c.jsx)(u.Ao,{templateId:n.conversation_template_id,iconSize:"gizmoConversation"}):(0,c.jsx)(P.V,{size:"gizmoConversation"})}function ea(e){var n,t,i,r,o=e.listItem,l=e.isFocused,a=e.itemIndex,d=e.setFocusedItemIndex,f=e.isMoreProminentDisplayVariant,g=e.className;switch(o.kind){case s.Agent:n=(0,c.jsx)(u.Py,{conversationTemplate:o.agent,iconSize:"gizmoConversation"}),t=o.agent.name,i=null!==(r=o.agent.description)&&void 0!==r?r:void 0;break;case s.Create:n=(0,c.jsx)(eu,{children:(0,c.jsx)(V.OvN,{className:"icon-xs text-white"})}),t=Q,i="Add personality, knowledge, and capabilities";break;case s.Browse:n=(0,c.jsx)(eu,{children:(0,c.jsx)(V.aCJ,{className:"icon-xs text-white"})}),t=X;break;case s.HistoryConversation:n=(0,c.jsx)(el,{conversation:o.conversation}),t=o.conversation.title;break;default:(0,D.ZP)(o)}var p=(0,A.J8)(),h=(0,L.useRef)(null);return(0,L.useEffect)(function(){if(l){var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}},[l]),(0,c.jsxs)(O(),{href:o.kind===s.Agent?(0,m.l1)(o.agent.id):o.kind===s.Browse?"/gizmo/explore":o.kind===s.Create?p:o.kind===s.HistoryConversation?(0,A.ZV)(o.conversation.id):(0,D.ZP)(o),shallow:!0,onMouseEnter:function(){d(a)},onMouseLeave:function(){d("textarea")},className:(0,Z.default)("flex items-center gap-3 overflow-hidden whitespace-nowrap rounded-xl",l?"bg-token-surface-secondary dark:bg-token-surface-tertiary":"",f?"p-3":"p-2",g),ref:h,children:[(0,c.jsx)(I.i1,{className:"h-6 w-6 flex-shrink-0",size:"large",children:n}),(0,c.jsxs)("div",{className:(0,Z.default)("grow",f?"overflow-hidden text-[13px] leading-[18px]":"flex items-center gap-8 overflow-hidden text-sm sm:gap-24"),children:[(0,c.jsxs)("div",{className:"flex grow gap-2 overflow-hidden",children:[(0,c.jsx)("div",{className:"flex-shrink-0 truncate font-medium",children:t}),(0,c.jsx)("div",{className:"truncate text-token-text-tertiary",children:i})]}),!f&&(0,c.jsx)(eo,{listItem:o})]})]})}function ec(e){for(var n=e.listItems,t=e.focusedItemIndex,i=e.setFocusedItemIndex,r=e.showGroupHeaders,o=[],l=0;l<n.length;l++){var a=n[l];if(r){var d=n[l-1];(null==d||a.kind!==d.kind||a.kind===s.Agent&&d.kind===s.Agent&&a.group!==d.group)&&(a.kind===s.Agent&&"recent"===a.group&&o.push((0,c.jsx)(ed,{children:"Recent"},"recent-header")),a.kind===s.Agent&&"my"===a.group&&o.push((0,c.jsx)(ed,{children:"My GPTs"},"my-header")),a.kind===s.Agent&&"explore"===a.group&&o.push((0,c.jsx)(ed,{children:"Explore"},"explore-header")),a.kind===s.Create&&o.push((0,c.jsx)("div",{className:"h-2 first:hidden"},"create-spacer")))}o.push((0,c.jsx)(ea,{listItem:a,isFocused:t===l,setFocusedItemIndex:i,itemIndex:l,isMoreProminentDisplayVariant:!0},a.kind===s.Agent?"".concat("recent"===a.group?"recent":"").concat(a.agent.id):a.kind===s.HistoryConversation?a.conversation.id:a.kind))}return 0===n.length?null:(0,c.jsx)("div",{className:"mx-auto mt-14 max-w-md flex-col gap-1 pb-16",children:o})}var ed=H.Z.div(K()),eu=H.Z.div(Y());function em(e){var n=e.listItems,t=e.focusedItemIndex,i=e.setFocusedItemIndex,r=e.className;return 0===n.length?null:(0,c.jsx)("div",{className:(0,Z.default)("absolute hidden w-full flex-col rounded-2xl border border-token-border-heavy p-2 shadow-[0_3px_3px_0_rgba(0,0,0,0.05)] group-focus-within:flex",r),children:n.map(function(e,n){return(0,c.jsx)(ea,{listItem:e,isFocused:t===n,setFocusedItemIndex:i,itemIndex:n,isMoreProminentDisplayVariant:!1},e.kind===s.Agent?"".concat("recent"===e.group?"recent":"").concat(e.agent.id):e.kind===s.HistoryConversation?e.conversation.id:e.kind)})})}function ef(e){var n=e.gizmo,t=e.isRecent;return(0,c.jsxs)(O(),{href:(0,m.l1)(n.id),shallow:!0,className:eg,children:[(0,c.jsx)(I.i1,{size:"small",children:(0,c.jsx)(u.Py,{conversationTemplate:n,iconSize:"small"})}),(0,c.jsx)("span",{className:"font-medium",children:n.name}),void 0!==t&&t&&(0,c.jsx)("span",{className:"text-token-text-tertiary",children:"Recent"})]})}var eg="flex gap-2.5 rounded border border-token-border-light p-2 text-xs hover:bg-token-surface-secondary dark:hover:bg-token-surface-tertiary transition";function ep(e){var n=e.recentlyUsedGizmoIds,t=e.myGizmos,i=e.listedGizmos,s=e.className,r=[],o=new Set,l=!0,a=!1,d=void 0;try{for(var u,m=n[Symbol.iterator]();!(l=(u=m.next()).done);l=!0)!function(){var e=u.value;if(!(r.length>3)){var n=null==t?void 0:t.find(function(n){return n.id===e});null==n&&(n=null==i?void 0:i.find(function(n){return n.id===e})),null!=n&&(r.push((0,c.jsx)(ef,{gizmo:n,isRecent:!0},n.id)),o.add(n.id))}}()}catch(e){a=!0,d=e}finally{try{l||null==m.return||m.return()}finally{if(a)throw d}}var f=!0,g=!1,p=void 0;try{for(var h,x=w.bS[Symbol.iterator]();!(f=(h=x.next()).done);f=!0)!function(){var e=h.value;if(!o.has(e)){var n=null==i?void 0:i.find(function(n){return n.id===e});null!=n&&(r.push((0,c.jsx)(ef,{gizmo:n},n.id)),o.add(n.id))}}()}catch(e){g=!0,p=e}finally{try{f||null==x.return||x.return()}finally{if(g)throw p}}return(0,c.jsxs)("div",{className:(0,Z.default)("mx-auto flex max-w-lg flex-wrap items-center justify-center gap-2",s),children:[r,(0,c.jsx)(O(),{href:"/gizmo/editor",shallow:!0,className:eg,children:"Create a GPT"}),(0,c.jsx)(O(),{href:"/gizmo/explore",shallow:!0,className:eg,children:"See all GPTs"})]})}},27064:function(e,n,t){t.r(n),t.d(n,{GizmoRequests:function(){return a},convertGizmoToConversationTemplate:function(){return u},convertGizmoToolToToolRef:function(){return c}});var i=t(51217),s=t(75641),r=t(80479),o=t(41341),l=t(95137),a=function(){function e(){(0,i._)(this,e)}return e.getAllGizmos=function(){return l.ZP.get("".concat(l.B,"/gizmos"))},e.getMyGizmos=function(){return l.ZP.get("".concat(l.B,"/gizmos?mine=true"))},e.getGizmo=function(e){return l.ZP.get("".concat(l.B,"/gizmos/").concat(e))},e.getGizmoByShortcode=function(e){return l.ZP.get("".concat(l.B,"/gizmos/p/").concat(e))},e.createGizmo=function(e){return l.ZP.post("".concat(l.B,"/gizmos"),e)},e.updateGizmo=function(e,n){return l.ZP.put("".concat(l.B,"/gizmos/").concat(e),n)},e.deleteGizmo=function(e){return l.ZP.delete("".concat(l.B,"/gizmos/").concat(e))},e}();function c(e){switch(e.type){case o.kj.PLUGIN:return(0,r.Q0)(e.settings.id);case o.kj.PYTHON:return{tool_id:s.qK.Python};case o.kj.BROWSER:return{tool_id:s.qK.Browser};case o.kj.DALLE:return{tool_id:s.qK.DallE};default:throw Error("not implemented: ".concat(e.type))}}function d(e){return e[0]==="".concat(o.LA.WORKSPACE)||e[0]==="".concat(o.LA.ALL)}function u(e){var n,t,i;return{id:e.gizmo.id,name:e.gizmo.display.name,author_name:null!==(n=e.gizmo.author.name)&&void 0!==n?n:void 0,config:{context_message:e.gizmo.instructions,model_slug:e.gizmo.model,assistant_welcome_message:null!==(t=e.gizmo.display.welcome_message)&&void 0!==t?t:void 0,enabled_tools:e.tools.map(function(e){return e.type===o.kj.PLUGIN?(0,r.Q0)(e.settings.id):{tool_id:e.type}})},description:e.gizmo.display.description,owner_id:e.gizmo.author.id,published_at:Object.keys(e.gizmo.permissions.permissions).some(d)?new Date().toISOString():void 0,updated_at:e.gizmo.updated_at,icon:void 0,color:void 0,profile_pic_id:void 0,profile_pic_permalink:null!==(i=e.gizmo.display.profile_picture_url)&&void 0!==i?i:void 0}}},58069:function(e,n,t){t.d(n,{h:function(){return b}});var i=t(35250),s=t(6038),r=t(36338),o=t(69385),l=t(67),a=t(20522),c=t(99805),d=t(78931),u=t(9181),m=t.n(u),f=t(60554),g=t.n(f),p=t(70079),h=t(1454);function x(e){var n=e.conversationTemplate;return(0,i.jsxs)("div",{className:"flex max-w-lg flex-col items-center gap-3 p-5",children:[(0,i.jsx)(c.i1,{size:"cover",children:(0,i.jsx)(s.Py,{conversationTemplate:n,iconSize:"cover"})}),(0,i.jsxs)("div",{className:"flex w-full shrink flex-col items-center justify-between gap-1 overflow-hidden",children:[(0,i.jsx)("h2",{className:"w-full truncate text-center text-2xl font-medium",children:n.name}),(0,i.jsx)("div",{className:"",children:n.description})]}),(0,i.jsxs)(v,{href:(0,r.l1)(n.id),children:[(0,i.jsx)(h.vPQ,{className:"icon-sm"}),"New Chat with ",n.name]})]})}function v(e){var n=e.href,t=e.children;return(0,i.jsx)(m(),{href:n,shallow:!0,className:"flex items-center gap-2 rounded-xl border border-token-border-medium px-4 py-2.5 font-medium transition hover:bg-token-surface-secondary",children:t})}function j(e){var n=e.conversationTemplate;return(0,i.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:(0,i.jsx)(x,{conversationTemplate:n})})}function b(e){var n=e.shortCode,t=(0,d.ec)(function(e){return e.currentWorkspace}),s=(0,o.H3)(n).data,r=(0,d.$T)(),c=(0,a.Ml)();return((0,p.useEffect)(function(){r||c||g().push("/")},[r,t,c]),null==t||null==s)?null:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"absolute left-4 top-4",children:(0,i.jsx)(l.m,{})}),(0,i.jsx)(j,{workspace:t,conversationTemplate:s})]})}},63018:function(e,n,t){t.r(n),t.d(n,{GizmoChatSidebarListVariantEmptyState:function(){return v},GizmoSidebarList:function(){return p}});var i=t(4337),s=t(35250),r=t(36338),o=t(98107),l=t(69385),a=t(83023),c=t(60785),d=t(41919),u=t(9181),m=t.n(u),f=t(1454);function g(){var e=(0,i._)(["flex items-center gap-2 rounded p-2 hover:bg-token-surface-tertiary"]);return g=function(){return e},e}function p(){var e=(0,l.K2)().data,n=(void 0===e?{}:e).items;return(0,s.jsxs)("div",{className:"pb-2",children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 bg-token-surface-primary px-2 pb-2 pt-3 text-xs font-medium text-token-text-tertiary",children:"New Chat"}),(0,s.jsxs)(x,{href:"/",shallow:!0,children:[(0,s.jsx)(a.$,{gizmo:void 0,className:"h-5 w-5"}),(0,s.jsx)("span",{className:"text-sm",children:"ChatGPT"})]}),o.bS.map(function(e){var t=null==n?void 0:n.find(function(n){return n.id===e});return null==t?null:(0,s.jsx)(h,{gizmo:t},t.id)}),(0,s.jsxs)(x,{href:"/gizmo/explore",shallow:!0,children:[(0,s.jsx)("div",{className:"gizmo-shadow-stroke flex h-5 w-5 items-center justify-center rounded-full bg-brand-purple text-white",children:(0,s.jsx)(f.aCJ,{className:"icon-xs"})}),(0,s.jsx)("span",{className:"text-sm",children:"Browse"})]}),(0,s.jsxs)(x,{href:"/gizmo/editor",shallow:!0,children:[(0,s.jsx)("div",{className:"gizmo-shadow-stroke flex h-5 w-5 items-center justify-center rounded-full bg-brand-purple text-white",children:(0,s.jsx)(f.OvN,{className:"icon-xs"})}),(0,s.jsx)("span",{className:"text-sm",children:"Create"})]})]})}function h(e){var n=e.gizmo;return(0,s.jsxs)(x,{href:null!=n?(0,r.l1)(n.id):"/",shallow:!0,children:[(0,s.jsx)(a.$,{gizmo:n,className:"h-5 w-5"}),(0,s.jsx)("span",{className:"text-sm",children:null!=n?n.name:"ChatGPT"})]})}var x=(0,t(21389).Z)(m())(g());function v(e){var n=e.clientThreadId,t=e.currentModel,i=(0,r.DT)(n);return(0,s.jsxs)("div",{className:"relative h-full",children:[null!=i?(0,s.jsx)("div",{className:"absolute left-0 right-0",children:(0,s.jsx)(c.B,{icon:void 0,currentModelConfig:t,clientThreadId:n})}):(0,s.jsx)("div",{className:"absolute right-2 top-2",children:(0,s.jsx)(d.GizmoModelSwitcher,{currentModel:t})}),(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)("div",{className:"max-w-md px-4 text-center text-2xl font-medium",children:null!=i?(0,s.jsx)(j,{gizmoId:i}):"How can I help you today?"})})]})}function j(e){var n=e.gizmoId,t=(0,l.b9)(n).data;return null==t?null:(0,s.jsx)("div",{children:t.config.assistant_welcome_message})}},32550:function(e,n,t){t.d(n,{k:function(){return s}});var i=t(69385);function s(e,n,t,s){return e.owner_id===n||(0,i.kS)(e.id)&&e.owner_id===t&&e.workspace_id===s}},60790:function(e,n,t){t.r(n),t.d(n,{gizmoCreateGPTCompletionCallback:function(){return j},gizmoDialogExtractFieldUpdates:function(){return k},gizmoEditorPlaygroundContextMessage:function(){return I},insertTemplateUpdateMessages:function(){return P}});var i=t(21722),s=t(39324),r=t(71209),o=t(81949),l=t(38104),a=t(75641),c=t(95954),d=t(36338),u=t(63031),m=t(98107),f=t(42569),g=t(95137),p=t(37469),h=t(77370),x=t(61888),v=t(8844);function j(e,n,t,i){return b.apply(this,arguments)}function b(){return(b=(0,i._)(function(e,n,t,i){var s,r;return(0,l.Jh)(this,function(o){switch(o.label){case 0:if(p.iN.getConversationTemplateId(e)!==m.ap.NEW_GPT)return[2];return[4,k(e)];case 1:if(null==(s=o.sent())||null==s.name||null==s.description||null==s.contextMessage||null==s.modelSlug||null==s.welcomeMessage)return[2];return[4,g.ZP.createConversationTemplate(n,s.name,s.description,{contextMessage:s.contextMessage,modelSlug:s.modelSlug,assistantWelcomeMessage:s.welcomeMessage,enabledTools:s.tools},!1,(0,d.GQ)(),(0,d.yq)(),void 0)];case 2:return r=o.sent().id,t.push((0,d.l1)(r),void 0,{shallow:!0}),i((0,p.OX)()),[2]}})})).apply(this,arguments)}var y=Object.values(a.qK);function _(e){return y.includes(e)?{tool_id:e}:e.startsWith("plugin:")?{tool_id:"plugin",data:{plugin_id:e.slice(7)}}:void 0}function w(e){if("plugin"===e.tool_id){var n;if((null===(n=e.data)||void 0===n?void 0:n.plugin_id)==null)return;return"plugin:".concat(e.data.plugin_id)}return e.tool_id}function N(){return(N=(0,i._)(function(e){var n,t,i,s;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(!((n=e.flatMap(function(e){return"gizmo_editor.generate_profile_pic"===e.author.name&&"multimodal_text"===e.content.content_type?e.content.parts:[]}).filter(function(e){return"object"==typeof e&&"asset_pointer"in e})).length>0))return[3,2];return t=n[n.length-1],i=(0,u.Iy)(t.asset_pointer),[4,g.ZP.getFileDownloadLink(i)];case 1:if((s=r.sent()).status===a.KF.Success)return[2,{id:i,permalink:s.download_url}];r.label=2;case 2:return[2]}})})).apply(this,arguments)}function k(e){return T.apply(this,arguments)}function T(){return(T=(0,i._)(function(e){var n,t,i,r,o,a,d,u;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=(n=function(e){for(var n=p.tQ.getThreadCurrentLeafId(e),t=p.tQ.getTree(e),i=[],s=t.getNodeByIdOrMessageId(n);null!=s&&s.message.author.role!==c.uU.User;)i.unshift(s.message),s=t.getNodeByIdOrMessageId(s.parentId);return i}(e)).filter(function(e){return"gizmo_editor.update_behavior"===e.recipient}).flatMap(function(e){return"text"===e.content.content_type?e.content.parts:[]}).map(function(e){return JSON.parse(e)}).reduce(function(e,n){return(0,s._)({},e,n)},{}),[4,function(e){return N.apply(this,arguments)}(n)];case 1:if(i=l.sent(),(0,x.isEmpty)(t)&&null==i)return[2];return r=t.name,o=t.context,a=t.description,d=t.welcome_message,u=t.abilities,[2,{name:"string"==typeof r?r:void 0,contextMessage:"string"==typeof o?o:void 0,modelSlug:f.dO,description:"string"==typeof a?a:void 0,welcomeMessage:"string"==typeof d?d:void 0,tools:Array.isArray(u)?(0,x.compact)(u.map(_)):void 0,profilePicId:null==i?void 0:i.id,profilePicPermalink:null==i?void 0:i.permalink}]}})})).apply(this,arguments)}function I(e){var n,t,i,l,a,c=new Set;switch(e.config.model_slug){case"gpt-4-dalle":c.add("dalle");break;case"gpt-4-browsing":c.add("browser");break;case"gpt-4-code-interpreter":c.add("python")}var d=!0,u=!1,m=void 0;try{for(var f,g,p=(null!==(f=e.config.enabled_tools)&&void 0!==f?f:[])[Symbol.iterator]();!(d=(g=p.next()).done);d=!0){var h=g.value;c.add(w(h))}}catch(e){u=!0,m=e}finally{try{d||null==p.return||p.return()}finally{if(u)throw m}}var x=null!==(n=e.name)&&void 0!==n?n:"",v=null!==(t=e.description)&&void 0!==t?t:"",j=null!==(i=e.config.context_message)&&void 0!==i?i:"",b=Array.from(c).join(","),y=null!==(l=e.config.assistant_welcome_message)&&void 0!==l?l:"",_=""===x&&""===v&&""===j&&""===b&&""===y,N=null!=e.profile_pic_id,k=_?"":"This is the GPT's current set of fields:\n\nname: ".concat(x,"\n\ndescription: ").concat(v,"\n\ncontext: ").concat(j,"\n\nabilities: ").concat(b,"\n\nwelcome_message: ").concat(y,"\n\n").concat(N?"The GPT has a profile picture.":"This GPT does not have a profile picture. You must generate a profile picture when you next update your behavior.","\n");return(0,r._)((0,s._)({},e),{config:(0,r._)((0,s._)({},e.config),{context_message:k,enabled_tools:(0,o._)(null!==(a=e.config.enabled_tools)&&void 0!==a?a:[]).concat([{tool_id:_?"gizmo_creator":"gizmo_editor"}])})})}function P(e,n,t,i){var s,r,o,l,a,d={};if(t.name!==(null==i?void 0:i.name)&&(d.name=t.name),t.description!==(null==i?void 0:i.description)&&(d.description=null!==(s=t.description)&&void 0!==s?s:""),t.config.context_message!==(null==i?void 0:i.config.context_message)&&(d.context=null!==(r=t.config.context_message)&&void 0!==r?r:""),t.config.assistant_welcome_message!==(null==i?void 0:i.config.assistant_welcome_message)&&(d.welcome_message=null!==(o=t.config.assistant_welcome_message)&&void 0!==o?o:""),t.config.enabled_tools!==(null==i?void 0:i.config.enabled_tools)&&(d.abilities=null!==(a=(0,x.compact)(null===(l=t.config.enabled_tools)||void 0===l?void 0:l.map(w)))&&void 0!==a?a:[]),!(0,x.isEmpty)(d)){var u=null!=d.abilities,m=(0,v.Z)(),f="Explicitly update your behavior to the following exact fields:\n\n    ".concat(JSON.stringify(d,null,2),"\n\n    ").concat(u?"You must call update_behavior with these new changes in your next response.":"Do not call update_behavior. Instead, use these updated fields as your current behavior, and in the next call to update_behavior, incorporate these changes.","\n    ");p.tQ.updateTree(e,function(e){var t=e.getNodeByIdOrMessageId(n).parentId;e.insertNodeBefore(n,{id:m,children:[],parentId:t,message:h.Cv.getTextAsMessage(f,c.uU.System),metadata:{isClientCreatedSystemMessage:!0}})}),p.tQ.setThreadCurrentLeafId(e,m)}}}}]);